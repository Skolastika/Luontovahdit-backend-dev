{"version":3,"sources":["constants.js","services/hotspotService.js","services/commentService.js","reducers/hotspotReducer.js","reducers/mapReducer.js","components/Map.js","services/userService.js","reducers/userReducer.js","services/loginService.js","components/MenuBar.js","components/HotspotForm.js","components/VoteButton.js","components/LoginPromptPopup.js","components/Comments.js","components/Togglable.js","components/CommentForm.js","components/Hotspot.js","components/LoginForm.js","components/RegisterForm.js","App.js","store.js","index.js"],"names":["dateFormat","year","month","day","hour","minute","routes","login","register","addHotspot","hotspots","appName","baseUrl","hotspotService","getAll","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","response","wrap","_context","prev","next","axios","get","sent","abrupt","data","stop","this","apply","arguments","getHotspotsByCoordinates","_ref2","_callee2","lng","lat","_context2","concat","_x","_x2","getHotspot","_ref3","_callee3","id","_context3","_x3","create","_ref4","_callee4","hotspot","_context4","post","withCredentials","_x4","upVote","_ref5","_callee5","_context5","type","_x5","downVote","_ref6","_callee6","_context6","_x6","commentService","comment","initialState","currentHotspot","newHotspot","newCoordinates","error","hotspotReducer","state","length","undefined","action","objectSpread","find","hs","inHotspot","comments","map","commentIndex","findIndex","c","properties","icon","geometry","coordinates","dispatch","location","console","log","mapReducer","Map","mapboxgl","accessToken","process","bounds","container","style","center","zoom","maxBounds","locateSuccess","position","_this","setCenter","coords","longitude","latitude","locateFail","navigator","geolocation","getCurrentPosition","addControl","MapboxLanguage","defaultLanguage","geocoder","MapboxGeocoder","language","country","bbox","placeholder","on","e","result","addSource","features","props","addLayer","source","layout","icon-image","icon-allow-overlap","originalEvent","cancelBubble","history","push","lngLat","isUserLoggedIn","setNewCoordinates","Popup","setLngLat","setHTML","addTo","getSource","setData","react_default","createElement","top","bottom","width","height","textAlign","marginTop","zIndex","React","Component","mapDispatchToProps","withRouter","connect","user","userService","getProfile","credentials","setUserLoggedIn","loggedIn","userReducer","loginService","logout","userInfo","MenuBar","_this2","Menu","attached","tabular","Container","Item","Dropdown","item","direction","onClick","Icon","paddingLeft","name","as","NavLink","exact","to","HotspotForm","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","close","setState","open","event","hotspotObject","preventDefault","target","title","value","description","addHotspotToMap","document","Modal","closeOnDimmerClick","onClose","closeIcon","Header","Content","Form","onSubmit","Input","TextArea","minHeight","Button","t0","VoteButton","vote","votes","color","compact","rest","objectWithoutProperties","assign","labelPosition","basic","Label","pointing","LoginPromptPopup","trigger","content","Link","hoverable","Comments","key","Segment","Date","createdAt","toLocaleDateString","addedBy","displayname","Divider","hidden","components_LoginPromptPopup","components_VoteButton","upVoteComment","upVotes","downVoteComment","downVotes","votedComment","_ref7","_callee7","_context7","_x7","Togglable","toggleVisibility","visible","hideWhenVisible","display","showWhenVisible","buttonLabel","children","CommentForm","addComment","commentObject","hotspotId","newComment","Hotspot","upVoteHotspot","downVoteHotspot","components_Togglable","components_CommentForm","components_Comments","votedHotspot","LoginForm","username","password","pathname","RegisterForm","passwordConf","email","usernameError","passwordError","displaynameError","emailError","errorMessages","userObject","status","message","handleChange","defineProperty","showWhenError","inverted","secondary","Field","onChange","App","initialiseHotspots","setHotspotsOnMap","checkUserSession","components_MenuBar","components_Map","Route","path","render","match","components_Hotspot","params","components_HotspotForm","components_LoginForm","components_RegisterForm","hotspotFeatures","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","es","BrowserRouter","src_App","getElementById","subscribe"],"mappings":"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","file":"static/js/main.24994c9e.chunk.js","sourcesContent":["const dateFormat = {\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  hour: 'numeric',\r\n  minute: 'numeric'\r\n}\r\n\r\nconst routes = {\r\n  login: '/kirjaudu',\r\n  register: '/rekisteroidy',\r\n  addHotspot: '/lisaa_kohde',\r\n  hotspots: '/kohteet'\r\n}\r\n\r\nconst appName = 'Luontovahdit'\r\n\r\nexport { dateFormat, routes, appName }","import axios from 'axios'\r\nconst baseUrl = '/api/hotspots'\r\n\r\nconst getAll = async () => {\r\n  const response = await axios.get(baseUrl)\r\n  return response.data\r\n}\r\n\r\nconst getHotspotsByCoordinates = async (lng, lat) => {\r\n  const response = await axios.get(`${baseUrl}/@${lng},${lat}`)\r\n  return response.data\r\n}\r\n\r\nconst getHotspot = async (id) => {\r\n  const response = await axios.get(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nconst create = async (hotspot) => {\r\n  const response = await axios.post(baseUrl, hotspot, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst upVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'upVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst downVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'downVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, getHotspotsByCoordinates, getHotspot, create, upVote, downVote }","import axios from 'axios'\r\nconst baseUrl = '/api/comments'\r\n\r\nconst create = async (comment) => {\r\n  const response = await axios.post(baseUrl, comment, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst upVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'upVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst downVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'downVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { create, upVote, downVote }","import hotspotService from '../services/hotspotService'\r\nimport commentService from '../services/commentService'\r\n\r\nconst initialState = {\r\n  hotspots:  [],\r\n  currentHotspot: null,\r\n  newHotspot: null,\r\n  newCoordinates: [],\r\n  error: null\r\n}\r\n\r\nconst hotspotReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case 'GET_HOTSPOTS_SUCCESS':\r\n      return {\r\n        hotspots: action.hotspots,\r\n        error: null\r\n      }\r\n    case 'GET_HOTSPOTS_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'SET_CURRENT_HOTSPOT':\r\n      return {\r\n        ...state,\r\n        currentHotspot: state.hotspots.find(hs => hs.id === action.id),\r\n        error: null\r\n      }\r\n    case 'SET_NEW_COORDINATES':\r\n      return {\r\n        ...state,\r\n        newCoordinates: action.newCoordinates\r\n      }\r\n    case 'ADD_HOTSPOT_SUCCESS':\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.concat(action.hotspot),\r\n        newHotspot: action.hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_HOTSPOT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'ADD_COMMENT_SUCCESS':\r\n      let hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\r\n      hotspot.comments = hotspot.comments.concat(action.comment)\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === hotspot.id\r\n          ? hotspot\r\n          : hs),\r\n        currentHotspot: hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_COMMENT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'VOTE_HOTSPOT_SUCCESS':\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === action.hotspot.id\r\n          ? action.hotspot\r\n          : hs),\r\n        currentHotspot: action.hotspot\r\n      }\r\n      case 'VOTE_HOTSPOT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n      case 'VOTE_COMMENT_SUCCESS':\r\n      hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\r\n      let commentIndex = hotspot.comments.findIndex((c) => c.id === action.comment.id)\r\n      hotspot.comments[commentIndex] = action.comment\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === hotspot.id\r\n          ? hotspot\r\n          : hs),\r\n        currentHotspot: hotspot,\r\n        error: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const initialiseHotspots = () => {\r\n  return async dispatch => {\r\n    try {\r\n      const hotspots = await hotspotService.getAll()\r\n      console.log(hotspots)\r\n      dispatch({\r\n        type:'GET_HOTSPOTS_SUCCESS',\r\n        hotspots\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'GET_HOTSPOTS_FAIL',\r\n        error: 'Virhe kohteiden haussa! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const setNewCoordinates = (newCoordinates) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_NEW_COORDINATES',\r\n      newCoordinates\r\n    })\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newHotspot = await hotspotService.create(hotspot)\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_SUCCESS',\r\n        hotspot: newHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_FAIL',\r\n        error: 'Kohdetta ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const setCurrentHotspot = (id) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_CURRENT_HOTSPOT',\r\n      id\r\n    })\r\n  }\r\n}\r\n\r\nexport const addComment = (comment) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newComment = await commentService.create(comment)\r\n      dispatch({\r\n        type: 'ADD_COMMENT_SUCCESS',\r\n        comment: newComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_COMMENT_FAIL',\r\n        error: 'Kommentia ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const upVoteHotspot = (id) => {\r\n  console.log('upvote')\r\n  return async dispatch => {\r\n    try {\r\n      const votedHotspot = await hotspotService.upVote(id)\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_SUCCESS',\r\n        hotspot: votedHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const downVoteHotspot = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedHotspot = await hotspotService.downVote(id)\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_SUCCESS',\r\n        hotspot: votedHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const upVoteComment = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedComment = await commentService.upVote(id)\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_SUCCESS',\r\n        comment: votedComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const downVoteComment = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedComment = await commentService.downVote(id)\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_SUCCESS',\r\n        comment: votedComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default hotspotReducer","const initialState = {\r\n  hotspots:  [\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e0b21ee7a321eb40f3e12\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [24.8297076, 60.3190656]\r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e2ecbc969793cecad491a\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [25, 60.2]\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nconst mapReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_HOTSPOTS':\r\n      return {\r\n        hotspots: action.hotspots\r\n      }\r\n    case 'ADD_HOTSPOT':\r\n      return {\r\n        hotspots: state.hotspots.concat(action.hotspot)\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setHotspotsOnMap = (hotspots) => {\r\n  return dispatch => {\r\n    const hotspotFeatures = hotspots.map(hs => {\r\n      return {\r\n        'type': 'Feature',\r\n        'properties': {\r\n          'id': hs.id,\r\n          'icon': 'star'\r\n        },\r\n        'geometry': {\r\n          'type': 'Point',\r\n          'coordinates': hs.location.coordinates\r\n        }\r\n      }\r\n    })\r\n    console.log(hotspotFeatures)\r\n    dispatch({\r\n      type: 'SET_HOTSPOTS',\r\n      hotspots: hotspotFeatures\r\n    })\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return dispatch => {\r\n    let newHotspot = {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": hotspot.id,\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        'type': 'Point',\r\n        'coordinates': hotspot.location.coordinates\r\n      }\r\n    }\r\n    console.log(newHotspot)\r\n    console.log(hotspot.location)\r\n    dispatch({\r\n      type: 'ADD_HOTSPOT',\r\n      hotspot: newHotspot\r\n    })\r\n  }\r\n}\r\n\r\nexport default mapReducer","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { routes } from '../constants'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\r\nimport MapboxLanguage from '@mapbox/mapbox-gl-language'\r\nimport { setNewCoordinates } from '../reducers/hotspotReducer'\r\nimport { addHotspot } from '../reducers/mapReducer'\r\nimport { Icon } from 'semantic-ui-react'\r\n\r\nclass Map extends React.Component {\r\n\r\n  async componentDidMount() {\r\n\r\n    mapboxgl.accessToken = process.env.REACT_APP_MAPTOKEN\r\n\r\n    // restrict map to Finland\r\n    // [west, south, east, north] \r\n    const bounds = [ 19.274990495527675, 59.64523662578557,\r\n      31.618656929369678, 70.13546651354179]\r\n\r\n    this.map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/mapbox/streets-v9',\r\n      center: [24.7385109, 60.11021], // default to approximately Helsinki\r\n      zoom: 10,\r\n      maxBounds: bounds\r\n    })\r\n\r\n    const locateSuccess = (position) => {\r\n      this.map = this.map.setCenter([position.coords.longitude, position.coords.latitude])\r\n    }\r\n\r\n    const locateFail = (error) => console.log(error)\r\n\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(locateSuccess, locateFail)\r\n    }\r\n\r\n    this.map.addControl(new MapboxLanguage({  defaultLanguage: 'mul' }))\r\n\r\n\r\n    // Geocoder\r\n\r\n    const geocoder = new MapboxGeocoder({\r\n      accessToken: mapboxgl.accessToken,\r\n      language: 'FI',\r\n      country: 'FI',\r\n      bbox: bounds,\r\n      placeholder: 'Etsi...'\r\n    })\r\n\r\n    geocoder.on('result', (e) => {\r\n      console.log(e)\r\n      console.log(e.result.geometry.coordinates)\r\n    })\r\n\r\n    this.map.addControl(geocoder)\r\n\r\n\r\n    // Map events\r\n\r\n    this.map.on('load', () => {\r\n      this.map.addSource('hotspots', {\r\n        \"type\": \"geojson\",\r\n        \"data\": {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n        }\r\n      })\r\n\r\n      this.map.addLayer({\r\n        \"id\": \"hotspot\",\r\n        \"source\": \"hotspots\",\r\n        \"type\": \"symbol\",\r\n        \"layout\": {\r\n          \"icon-image\": \"{icon}-15\",\r\n          \"icon-allow-overlap\": true\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n    this.map.on('click', 'hotspot', (e) => {\r\n      e.originalEvent.cancelBubble = true\r\n      this.props.history.push(routes.hotspots + '/' + e.features[0].properties.id)\r\n    })\r\n\r\n    this.map.on('click', (e) => {\r\n      if (e.originalEvent.cancelBubble){\r\n        return\r\n      }\r\n      console.log(e.lngLat.lng + ' ' + e.lngLat.lat)\r\n      if (this.props.isUserLoggedIn) {\r\n        this.props.setNewCoordinates([ e.lngLat.lng, e.lngLat.lat ])\r\n        this.props.history.push(routes.addHotspot)\r\n      } else {\r\n        // TODO: add styles for .mapboxgl-popup\r\n        new mapboxgl.Popup()\r\n          .setLngLat(e.lngLat)\r\n          .setHTML(`<a href=\"${ routes.login }\">Kirjaudu sisään?</a>`)\r\n          .addTo(this.map)\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const source = this.map.getSource('hotspots')\r\n    \r\n    if (source) {\r\n      this.map.getSource('hotspots').setData({\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const mapStyle = {\r\n      position: 'absolute',\r\n      top:0,\r\n      bottom:0,\r\n      width:'100%',\r\n      height:'100%',\r\n      textAlign: 'left',\r\n      marginTop: '43px',\r\n      zIndex: 10\r\n    }\r\n    return (\r\n      <div id='map' style={mapStyle} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.map.hotspots,\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setNewCoordinates,\r\n  addHotspot\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Map))","import axios from 'axios'\r\n\r\nconst getProfile = async (credentials) => {\r\n  const response = await axios.get('/profile/get', credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { getProfile }","import userService from '../services/userService'\r\n\r\nconst initialState = {\r\n  isUserLoggedIn: false\r\n}\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USERLOGGEDIN':\r\n      return {\r\n        ...state,\r\n        isUserLoggedIn: action.loggedIn\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setUserLoggedIn = (loggedIn) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_USERLOGGEDIN',\r\n      loggedIn\r\n    })\r\n  }\r\n}\r\n\r\nexport const checkUserSession = () => {\r\n  return async dispatch => {\r\n    try {\r\n      await userService.getProfile()\r\n      dispatch({\r\n        type: 'SET_USERLOGGEDIN',\r\n        loggedIn: true\r\n      })\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n}\r\n\r\nexport default userReducer","import axios from 'axios'\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post('/login', credentials)\r\n  return response.data\r\n}\r\n\r\nconst logout = async () => {\r\n  const response = await axios.post('/logout', { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst register = async (userInfo) => {\r\n  const response = await axios.post('/register', userInfo)\r\n  return response.data\r\n}\r\n\r\nexport default { login, logout, register }","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Menu, Dropdown, Icon, Container } from 'semantic-ui-react'\r\nimport { setUserLoggedIn } from '../reducers/userReducer'\r\nimport loginService from '../services/loginService'\r\n\r\nclass MenuBar extends React.Component {\r\n\r\n  logout = async () => {\r\n    await loginService.logout()\r\n    this.props.setUserLoggedIn(false)\r\n  }\r\n\r\n  render() {\r\n\r\n    const subMenu = () => {\r\n      if (this.props.isUserLoggedIn) {\r\n        return (\r\n          <Dropdown item icon='bars' direction='left'>\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item onClick={ this.logout }>\r\n                Kirjaudu ulos\r\n                <Icon style={{ paddingLeft: '5px' }} name='log out' />\r\n              </Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        )\r\n      } else {\r\n        return (\r\n          <Menu.Item as={NavLink} exact to={ routes.login }>\r\n            <Icon name='sign in' />\r\n          </Menu.Item>\r\n        )\r\n        /*return (\r\n          <Menu.Item onClick={ this.props.showLoginForm }>\r\n            <Icon name='sign in' />\r\n          </Menu.Item>\r\n        )*/\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Menu attached='top' tabular>\r\n        <Container>\r\n          <Menu.Item>{ appName }</Menu.Item>\r\n          <Menu.Menu position='right'>\r\n            { subMenu() }\r\n          </Menu.Menu>\r\n        </Container>\r\n      </Menu>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setUserLoggedIn\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MenuBar))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Modal, Form, TextArea } from 'semantic-ui-react'\r\nimport { addHotspot } from '../reducers/hotspotReducer'\r\nimport { addHotspot as addHotspotToMap } from '../reducers/mapReducer'\r\nimport { appName } from '../constants'\r\n\r\nclass HotspotForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n\r\n    document.title = appName + '- Lisää kohde'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  addHotspot = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.title.value.length > 0 &&\r\n        event.target.description.value.length > 0) {\r\n\r\n      const hotspotObject = {\r\n        title: event.target.title.value,\r\n        description: event.target.description.value,\r\n        location: {\r\n          type: 'Point',\r\n          coordinates: this.props.coordinates\r\n        }\r\n      }\r\n\r\n      event.target.title.value = ''\r\n      event.target.description.value = ''\r\n\r\n      await this.props.addHotspot(hotspotObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding hotspot...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n        console.log(this.props.newHotspot)\r\n        this.props.addHotspotToMap(this.props.newHotspot)\r\n        this.close()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log('open ' + this.state.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Lisää kohde</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.addHotspot }>\r\n              <div>\r\n                Kohteen nimi:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Havainto:\r\n                <TextArea\r\n                  name=\"description\"\r\n                  style={{ minHeight: 100 }} />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Lisää\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    newHotspot: state.hotspot.newHotspot,\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addHotspot,\r\n  addHotspotToMap\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(HotspotForm))","import React from 'react'\r\nimport { Button, Icon, Label } from 'semantic-ui-react'\r\n\r\nconst VoteButton = ({ id, vote, votes, color, icon, compact, ...rest }) => (\r\n  <Button as='div' labelPosition='right' { ...rest }>\r\n    <Button\r\n      basic\r\n      color={ color }\r\n      type='button'\r\n      onClick={ () => vote(id) }\r\n      compact={ compact }\r\n    >\r\n      <Icon name={ icon } />\r\n    </Button>\r\n    <Label as='a' basic pointing='left'>\r\n      { votes }\r\n    </Label>\r\n  </Button>\r\n)\r\n\r\nexport default VoteButton\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Icon, Popup } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom'\r\nimport { routes } from '../constants'\r\n\r\nclass LoginPromptPopup extends React.Component {\r\n\r\n  render() {\r\n    if (this.props.isUserLoggedIn) {\r\n      return this.props.trigger\r\n    } else {\r\n      return (\r\n        <Popup\r\n          trigger={ this.props.trigger }\r\n          content={\r\n            <Link to={ routes.login }>Kirjaudu sisään? <Icon name='sign in' /></Link>\r\n          }\r\n          on='click'\r\n          hoverable\r\n          position='top right'\r\n        />\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPromptPopup)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Segment, Button, Icon, Divider } from 'semantic-ui-react'\r\nimport { dateFormat } from '../constants'\r\nimport { upVoteComment, downVoteComment } from '../reducers/hotspotReducer'\r\nimport VoteButton from './VoteButton'\r\nimport LoginPromptPopup from './LoginPromptPopup'\r\n\r\nclass Comments extends React.Component {\r\n\r\n  render() {\r\n    console.log(this.props)\r\n    return (\r\n      <div>\r\n        { this.props.comments.map(comment =>\r\n          <div key={ comment.id }>\r\n            <Segment>\r\n              { new Date(comment.createdAt).toLocaleDateString('fi-FI', dateFormat) } lisännyt { comment.addedBy.displayname }\r\n              <Divider hidden />\r\n              <p>{ comment.content }</p>\r\n              <Divider hidden />\r\n              <LoginPromptPopup trigger = {\r\n                <VoteButton\r\n                  id={ comment.id }\r\n                  vote={ this.props.upVoteComment }\r\n                  votes={ comment.upVotes }\r\n                  color='green'\r\n                  icon='thumbs up'\r\n                  compact={ true }\r\n                />\r\n              } />\r\n              <LoginPromptPopup trigger = {\r\n                <VoteButton\r\n                  id={ comment.id }\r\n                  vote={ this.props.downVoteComment }\r\n                  votes={ comment.downVotes }\r\n                  color='orange'\r\n                  icon='thumbs down'\r\n                  compact={ true }\r\n                />\r\n              } />\r\n              <Button compact basic color='red'>\r\n                  <Icon name='flag' />\r\n              </Button>\r\n            </Segment>\r\n            <Divider hidden />\r\n          </div>\r\n        ) }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  upVoteComment,\r\n  downVoteComment\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Comments)","import React from 'react'\r\nimport { Segment, Button, Divider } from 'semantic-ui-react'\r\n\r\nclass Togglable extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      visible: false\r\n    }\r\n  }\r\n\r\n  toggleVisibility = () => {\r\n    this.setState({ visible: !this.state.visible })\r\n  }\r\n\r\n  render() {\r\n    const hideWhenVisible = { display: this.state.visible ? 'none' : '' }\r\n    const showWhenVisible = { display: this.state.visible ? '' : 'none' }\r\n\r\n    return (\r\n      <Segment>\r\n        <div style={hideWhenVisible}>\r\n          <Button onClick={this.toggleVisibility}>{this.props.buttonLabel}</Button>\r\n        </div>\r\n        <div style={showWhenVisible}>\r\n          <Button basic onClick={this.toggleVisibility}>Peruuta</Button>\r\n          <Divider hidden />\r\n          {this.props.children}\r\n        </div>\r\n      </Segment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Togglable","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, TextArea } from 'semantic-ui-react'\r\nimport { addComment } from '../reducers/hotspotReducer'\r\n\r\nclass CommentForm extends Component {\r\n\r\n  addComment = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.comment.value.length > 0) {\r\n\r\n      const commentObject = {\r\n        content: event.target.comment.value,\r\n        inHotspot: this.props.hotspotId\r\n      }\r\n\r\n      event.target.comment.value = ''\r\n\r\n      await this.props.addComment(commentObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding comment...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form onSubmit={ this.addComment }>\r\n      <div>\r\n        <TextArea\r\n          name=\"comment\"\r\n          style={{ minHeight: 100 }} />\r\n      </div>\r\n      <Button type=\"submit\">\r\n        Lisää\r\n      </Button>\r\n    </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addComment\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentForm)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Modal, Icon, Divider, Popup } from 'semantic-ui-react'\r\nimport { upVoteHotspot, downVoteHotspot } from '../reducers/hotspotReducer'\r\nimport Comments from './Comments'\r\nimport Togglable from './Togglable'\r\nimport CommentForm from './CommentForm'\r\nimport VoteButton from './VoteButton'\r\nimport LoginPromptPopup from './LoginPromptPopup'\r\nimport { appName } from '../constants'\r\n\r\nclass Hotspot extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n\r\n    if (props.hotspot) {\r\n      document.title = appName + '- ' + props.hotspot.title\r\n    }\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  render() {\r\n\r\n    if (this.props.hotspot) {\r\n      const hs = this.props.hotspot\r\n\r\n      const showCommentButton = () => {\r\n        if (this.props.isUserLoggedIn) {\r\n          return (\r\n            <Togglable buttonLabel=\"Kommentoi\">\r\n              <CommentForm hotspotId={ hs.id } />\r\n            </Togglable>\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={ this.state.open }\r\n            closeOnDimmerClick={ false }\r\n            onClose={ this.close }\r\n            closeIcon\r\n          >\r\n            <Modal.Header>{ hs.title }</Modal.Header>\r\n            <Modal.Content>\r\n              <LoginPromptPopup trigger={\r\n                <VoteButton\r\n                  id={ hs.id }\r\n                  vote={ this.props.upVoteHotspot }\r\n                  votes={ hs.upVotes }\r\n                  color='green'\r\n                  icon='thumbs up'\r\n                />\r\n              } />\r\n              <LoginPromptPopup trigger={\r\n                <VoteButton\r\n                  id={ hs.id }\r\n                  vote={ this.props.downVoteHotspot }\r\n                  votes={ hs.downVotes }\r\n                  color='orange'\r\n                  icon='thumbs down'\r\n                />\r\n               } />\r\n              <Button basic color='red'>\r\n                    <Icon name='flag' />\r\n              </Button>\r\n              <Divider hidden />\r\n              { hs.description }\r\n              <Divider hidden />\r\n              { showCommentButton() }\r\n              <Comments comments={ hs.comments } />\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={this.state.open}\r\n            closeOnDimmerClick={false}\r\n            onClose={this.close}\r\n            closeIcon\r\n          >\r\n            <Modal.Header>Kohdetta ei löytynyt!</Modal.Header>\r\n            <Modal.Content>\r\n              <p>Jotain meni pieleen.</p>\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  upVoteHotspot,\r\n  downVoteHotspot\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Hotspot))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Button, Modal, Form, Icon } from 'semantic-ui-react'\r\nimport { setUserLoggedIn } from '../reducers/userReducer'\r\nimport loginService from '../services/loginService'\r\n\r\nclass LoginForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n    document.title = appName + '- Kirjaudu'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  login = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.username.value.length > 0 &&\r\n        event.target.password.value.length > 0) {\r\n      try {\r\n        await loginService.login({\r\n          username: event.target.username.value,\r\n          password: event.target.password.value\r\n        })\r\n        this.props.setUserLoggedIn(true)\r\n        this.close()\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Tervetuloa!</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.login }>\r\n              <div>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                />\r\n              </div>\r\n              <Button type=\"submit\" icon labelPosition='right'>\r\n                Kirjaudu sisään\r\n                <Icon name='sign in' />\r\n              </Button>\r\n              <Link to={{\r\n                  pathname: routes.register,\r\n                  state: { open: true }\r\n                }}\r\n              >Rekisteröidy?</Link>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setUserLoggedIn\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(LoginForm))","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Button, Modal, Form, Segment } from 'semantic-ui-react'\r\nimport loginService from '../services/loginService'\r\n\r\nclass RegisterForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open,\r\n      username: '',\r\n      password: '',\r\n      passwordConf: '',\r\n      displayname: '',\r\n      email: '',\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false,\r\n      errorMessages: []\r\n    }\r\n\r\n    document.title = appName + '- Rekisteröidy'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({\r\n      open: false,\r\n      username: '',\r\n      password: '',\r\n      passwordConf: '',\r\n      displayname: '',\r\n      email: '',\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false,\r\n      errorMessages: []\r\n    })\r\n    this.props.history.push(routes.login)\r\n  }\r\n\r\n  register = async (event) => {\r\n    event.preventDefault()\r\n\r\n    this.setState({\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false\r\n    })\r\n\r\n    if (this.state.username.length < 6) {\r\n      await this.setState({\r\n        usernameError: true,\r\n        errorMessages: this.state.errorMessages.concat('Käyttäjätunnuksen täytyy olla vähintään 6 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.password.length < 8 ||\r\n        this.state.password !== this.state.passwordConf) {\r\n      await this.setState({\r\n        passwordError: true,\r\n        errorMessages: this.state.errorMessages.concat('Salasanan täytyy olla vähintään 8 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.displayname.length < 6) {\r\n      await this.setState({\r\n        displaynameError: true,\r\n        errorMessages: this.state.errorMessages.concat('Käyttäjänimen täytyy olla vähintään 6 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.email.length < 6) {\r\n      await this.setState({\r\n        emailError: true,\r\n        errorMessages: this.state.errorMessages.concat('Anna toimiva sähköpostiosoite.')\r\n      })\r\n    }\r\n\r\n    if (this.state.usernameError ||\r\n        this.state.passwordError ||\r\n        this.state.displaynameError ||\r\n        this.state.emailError) {\r\n\r\n      return\r\n\r\n    } else {\r\n      const userObject = {\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n        displayname: this.state.displayname,\r\n        email: this.state.email\r\n      }\r\n\r\n      try {\r\n        await loginService.register(userObject)\r\n        this.close()\r\n\r\n      } catch (error) {\r\n        console.log('Virhe rekisteröinnissä...')\r\n        console.log(error)\r\n        if (error.response.status === 409) {\r\n          if (error.response.data.message === 'username or email address already in use ') {\r\n            this.setState({\r\n              errorMessages: ['Annettua sähköpostiosoitetta on jo käytetty rekisteröitymiseen.']\r\n            })\r\n          } else {\r\n            this.setState({\r\n              errorMessages: ['Käyttäjätunnusta ei voitu rekisteröidä. Tarkista tiedot.']\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value })\r\n  }\r\n\r\n  render() {\r\n    const showWhenError = { display: this.state.errorMessages.length > 0 ? '' : 'none' }\r\n\r\n    console.log('open ' + this.state.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Rekisteröidy käyttäjäksi</Modal.Header>\r\n          <Modal.Content>\r\n            <Segment style={ showWhenError } color='red' inverted secondary>\r\n              Huomioithan seuraavat:\r\n              <ul>\r\n                { this.state.errorMessages.map(error => {\r\n                  return (<li key={error}>{error}</li>)\r\n                })\r\n                }\r\n              </ul>\r\n            </Segment>\r\n            <Form onSubmit={ this.register }>\r\n              <Form.Field>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  error={ this.state.usernameError }\r\n                  onChange={ this.handleChange }\r\n                  attached='top'\r\n                />                \r\n              </Form.Field>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana uudelleen:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"passwordConf\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Nimimerkki:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"displayname\"\r\n                  error={ this.state.displaynameError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Sähköpostiosoite:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  error={ this.state.emailError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Rekisteröidy\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(RegisterForm)","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Route, withRouter } from 'react-router-dom'\r\nimport Map from './components/Map'\r\nimport MenuBar from './components/MenuBar'\r\nimport HotspotForm from './components/HotspotForm'\r\nimport Hotspot from './components/Hotspot'\r\nimport LoginForm from './components/LoginForm'\r\nimport RegisterForm from './components/RegisterForm'\r\nimport { initialiseHotspots } from './reducers/hotspotReducer'\r\nimport { setHotspotsOnMap } from './reducers/mapReducer'\r\nimport { routes, appName } from './constants'\r\nimport { checkUserSession } from './reducers/userReducer'\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  async componentDidMount() {\r\n    await this.props.initialiseHotspots()\r\n    if (this.props.hotspots) {\r\n      console.log(this.props.hotspots)\r\n      this.props.setHotspotsOnMap(this.props.hotspots)\r\n    }\r\n    this.props.checkUserSession()\r\n  }\r\n\r\n  render() {\r\n    const hotspotById = (id) => {\r\n      const hotspot = this.props.hotspots.find(hotspot => hotspot.id === id)\r\n      return hotspot\r\n    }\r\n\r\n    document.title = appName\r\n    return (\r\n      <div>\r\n        <div>\r\n          <MenuBar />\r\n        </div>\r\n        <div id='mapPopup' />\r\n        <div id='mapComponent'>\r\n          <Map />\r\n        </div>\r\n        <Route exact\r\n          path={ `${routes.hotspots}/:id` }\r\n          render={ ({ match }) =>\r\n            <Hotspot\r\n              open={ true }\r\n              hotspot={ hotspotById(match.params.id) }\r\n            />\r\n          }\r\n        />\r\n        <Route exact path={ routes.addHotspot } render={ ({ match }) =>\r\n          <HotspotForm\r\n            open={ true }\r\n            coordinates={ this.props.coordinates }\r\n          /> }\r\n        />\r\n        <Route exact path={ routes.login } render={ ({ match }) =>\r\n          <LoginForm open={ true } /> }\r\n        />\r\n        <Route exact path={ routes.register } render={ ({ match }) =>\r\n          <RegisterForm open={ true } /> }\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.hotspot.hotspots,\r\n    coordinates: state.hotspot.newCoordinates\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  initialiseHotspots,\r\n  setHotspotsOnMap,\r\n  checkUserSession\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App))\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport mapReducer from './reducers/mapReducer'\r\nimport userReducer from './reducers/userReducer'\r\nimport hotspotReducer from './reducers/hotspotReducer'\r\n//import userReducer from './reducers/userReducer'\r\n\r\nconst reducer = combineReducers({\r\n  map: mapReducer,\r\n  user: userReducer,\r\n  hotspot: hotspotReducer\r\n})\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n  )\r\n)\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)"],"sourceRoot":""}