{"version":3,"sources":["constants.js","services/hotspotService.js","services/commentService.js","reducers/hotspotReducer.js","reducers/mapReducer.js","components/Map.js","services/userService.js","reducers/userReducer.js","services/loginService.js","components/MenuBar.js","components/HotspotForm.js","components/VoteButton.js","components/LoginPromptPopup.js","components/Comments.js","components/Togglable.js","components/CommentForm.js","components/Hotspot.js","components/LoginForm.js","components/RegisterForm.js","App.js","store.js","index.js"],"names":["dateFormat","year","month","day","hour","minute","routes","login","register","addHotspot","hotspots","appName","baseUrl","hotspotService","getAll","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","response","wrap","_context","prev","next","axios","get","sent","abrupt","data","stop","this","apply","arguments","getHotspotsByCoordinates","_ref2","_callee2","lng","lat","_context2","concat","_x","_x2","getHotspot","_ref3","_callee3","id","_context3","_x3","create","_ref4","_callee4","hotspot","_context4","post","withCredentials","_x4","upVote","_ref5","_callee5","_context5","type","_x5","downVote","_ref6","_callee6","_context6","_x6","commentService","comment","initialState","currentHotspot","newHotspot","newCoordinates","error","hotspotReducer","state","length","undefined","action","objectSpread","find","hs","inHotspot","comments","map","commentIndex","findIndex","c","properties","icon","geometry","coordinates","dispatch","location","console","log","mapReducer","Map","_this","mapboxgl","accessToken","process","container","style","center","zoom","maxBounds","addControl","MapboxLanguage","defaultLanguage","MapboxGeocoder","language","placeholder","on","addSource","features","props","addLayer","source","layout","icon-image","icon-allow-overlap","e","originalEvent","cancelBubble","history","push","lngLat","isUserLoggedIn","setNewCoordinates","Popup","setLngLat","setHTML","addTo","getSource","setData","react_default","createElement","position","top","bottom","width","height","textAlign","marginTop","zIndex","React","Component","mapDispatchToProps","withRouter","connect","user","userService","getProfile","credentials","setUserLoggedIn","loggedIn","userReducer","loginService","logout","userInfo","MenuBar","_this2","Menu","attached","tabular","Container","Item","Dropdown","item","direction","onClick","Icon","paddingLeft","name","as","NavLink","exact","to","HotspotForm","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","close","setState","open","event","hotspotObject","preventDefault","target","title","value","description","addHotspotToMap","document","Modal","closeOnDimmerClick","onClose","closeIcon","Header","Content","Form","onSubmit","Input","TextArea","minHeight","Button","t0","VoteButton","vote","votes","color","compact","rest","objectWithoutProperties","assign","labelPosition","basic","Label","pointing","LoginPromptPopup","trigger","content","Link","hoverable","Comments","key","Segment","Date","createdAt","toLocaleDateString","addedBy","displayname","Divider","hidden","components_LoginPromptPopup","components_VoteButton","upVoteComment","upVotes","downVoteComment","downVotes","votedComment","_ref7","_callee7","_context7","_x7","Togglable","toggleVisibility","visible","hideWhenVisible","display","showWhenVisible","buttonLabel","children","CommentForm","addComment","commentObject","hotspotId","newComment","Hotspot","upVoteHotspot","downVoteHotspot","components_Togglable","components_CommentForm","components_Comments","votedHotspot","LoginForm","username","password","pathname","RegisterForm","passwordConf","email","usernameError","passwordError","displaynameError","emailError","errorMessages","userObject","status","message","handleChange","defineProperty","showWhenError","inverted","secondary","Field","onChange","App","initialiseHotspots","setHotspotsOnMap","checkUserSession","components_MenuBar","components_Map","Route","path","render","match","components_Hotspot","params","components_HotspotForm","components_LoginForm","components_RegisterForm","hotspotFeatures","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","es","BrowserRouter","src_App","getElementById","subscribe"],"mappings":"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","file":"static/js/main.ae2a9032.chunk.js","sourcesContent":["const dateFormat = {\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  hour: 'numeric',\r\n  minute: 'numeric'\r\n}\r\n\r\nconst routes = {\r\n  login: '/kirjaudu',\r\n  register: '/rekisteroidy',\r\n  addHotspot: '/lisaa_kohde',\r\n  hotspots: '/kohteet'\r\n}\r\n\r\nconst appName = 'Luontovahdit'\r\n\r\nexport { dateFormat, routes, appName }","import axios from 'axios'\r\nconst baseUrl = '/api/hotspots'\r\n\r\nconst getAll = async () => {\r\n  const response = await axios.get(baseUrl)\r\n  return response.data\r\n}\r\n\r\nconst getHotspotsByCoordinates = async (lng, lat) => {\r\n  const response = await axios.get(`${baseUrl}/@${lng},${lat}`)\r\n  return response.data\r\n}\r\n\r\nconst getHotspot = async (id) => {\r\n  const response = await axios.get(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nconst create = async (hotspot) => {\r\n  const response = await axios.post(baseUrl, hotspot, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst upVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'upVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst downVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'downVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, getHotspotsByCoordinates, getHotspot, create, upVote, downVote }","import axios from 'axios'\r\nconst baseUrl = '/api/comments'\r\n\r\nconst create = async (comment) => {\r\n  const response = await axios.post(baseUrl, comment, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst upVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'upVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst downVote = async (id) => {\r\n  const response = await axios.post(`${baseUrl}/${id}/vote`,\r\n    { type: 'downVote' },\r\n    { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { create, upVote, downVote }","import hotspotService from '../services/hotspotService'\r\nimport commentService from '../services/commentService'\r\n\r\nconst initialState = {\r\n  hotspots:  [],\r\n  currentHotspot: null,\r\n  newHotspot: null,\r\n  newCoordinates: [],\r\n  error: null\r\n}\r\n\r\nconst hotspotReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case 'GET_HOTSPOTS_SUCCESS':\r\n      return {\r\n        hotspots: action.hotspots,\r\n        error: null\r\n      }\r\n    case 'GET_HOTSPOTS_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'SET_CURRENT_HOTSPOT':\r\n      return {\r\n        ...state,\r\n        currentHotspot: state.hotspots.find(hs => hs.id === action.id),\r\n        error: null\r\n      }\r\n    case 'SET_NEW_COORDINATES':\r\n      return {\r\n        ...state,\r\n        newCoordinates: action.newCoordinates\r\n      }\r\n    case 'ADD_HOTSPOT_SUCCESS':\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.concat(action.hotspot),\r\n        newHotspot: action.hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_HOTSPOT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'ADD_COMMENT_SUCCESS':\r\n      let hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\r\n      hotspot.comments = hotspot.comments.concat(action.comment)\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === hotspot.id\r\n          ? hotspot\r\n          : hs),\r\n        currentHotspot: hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_COMMENT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'VOTE_HOTSPOT_SUCCESS':\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === action.hotspot.id\r\n          ? action.hotspot\r\n          : hs),\r\n        currentHotspot: action.hotspot\r\n      }\r\n      case 'VOTE_HOTSPOT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n      case 'VOTE_COMMENT_SUCCESS':\r\n      hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\r\n      let commentIndex = hotspot.comments.findIndex((c) => c.id === action.comment.id)\r\n      hotspot.comments[commentIndex] = action.comment\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === hotspot.id\r\n          ? hotspot\r\n          : hs),\r\n        currentHotspot: hotspot,\r\n        error: null\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const initialiseHotspots = () => {\r\n  return async dispatch => {\r\n    try {\r\n      const hotspots = await hotspotService.getAll()\r\n      console.log(hotspots)\r\n      dispatch({\r\n        type:'GET_HOTSPOTS_SUCCESS',\r\n        hotspots\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'GET_HOTSPOTS_FAIL',\r\n        error: 'Virhe kohteiden haussa! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const setNewCoordinates = (newCoordinates) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_NEW_COORDINATES',\r\n      newCoordinates\r\n    })\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newHotspot = await hotspotService.create(hotspot)\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_SUCCESS',\r\n        hotspot: newHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_FAIL',\r\n        error: 'Kohdetta ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const setCurrentHotspot = (id) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_CURRENT_HOTSPOT',\r\n      id\r\n    })\r\n  }\r\n}\r\n\r\nexport const addComment = (comment) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newComment = await commentService.create(comment)\r\n      dispatch({\r\n        type: 'ADD_COMMENT_SUCCESS',\r\n        comment: newComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_COMMENT_FAIL',\r\n        error: 'Kommentia ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const upVoteHotspot = (id) => {\r\n  console.log('upvote')\r\n  return async dispatch => {\r\n    try {\r\n      const votedHotspot = await hotspotService.upVote(id)\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_SUCCESS',\r\n        hotspot: votedHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const downVoteHotspot = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedHotspot = await hotspotService.downVote(id)\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_SUCCESS',\r\n        hotspot: votedHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_HOTSPOT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const upVoteComment = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedComment = await commentService.upVote(id)\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_SUCCESS',\r\n        comment: votedComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const downVoteComment = (id) => {\r\n  return async dispatch => {\r\n    try {\r\n      const votedComment = await commentService.downVote(id)\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_SUCCESS',\r\n        comment: votedComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'VOTE_COMMENT_FAIL',\r\n        error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default hotspotReducer","const initialState = {\r\n  hotspots:  [\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e0b21ee7a321eb40f3e12\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [24.8297076, 60.3190656]\r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e2ecbc969793cecad491a\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [25, 60.2]\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nconst mapReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_HOTSPOTS':\r\n      return {\r\n        hotspots: action.hotspots\r\n      }\r\n    case 'ADD_HOTSPOT':\r\n      return {\r\n        hotspots: state.hotspots.concat(action.hotspot)\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setHotspotsOnMap = (hotspots) => {\r\n  return dispatch => {\r\n    const hotspotFeatures = hotspots.map(hs => {\r\n      return {\r\n        'type': 'Feature',\r\n        'properties': {\r\n          'id': hs.id,\r\n          'icon': 'star'\r\n        },\r\n        'geometry': {\r\n          'type': 'Point',\r\n          'coordinates': hs.location.coordinates\r\n        }\r\n      }\r\n    })\r\n    console.log(hotspotFeatures)\r\n    dispatch({\r\n      type: 'SET_HOTSPOTS',\r\n      hotspots: hotspotFeatures\r\n    })\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return dispatch => {\r\n    let newHotspot = {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": hotspot.id,\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        'type': 'Point',\r\n        'coordinates': hotspot.location.coordinates\r\n      }\r\n    }\r\n    console.log(newHotspot)\r\n    console.log(hotspot.location)\r\n    dispatch({\r\n      type: 'ADD_HOTSPOT',\r\n      hotspot: newHotspot\r\n    })\r\n  }\r\n}\r\n\r\nexport default mapReducer","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { routes } from '../constants'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\r\nimport MapboxLanguage from '@mapbox/mapbox-gl-language'\r\nimport { setNewCoordinates } from '../reducers/hotspotReducer'\r\nimport { addHotspot } from '../reducers/mapReducer'\r\nimport { Icon } from 'semantic-ui-react'\r\n\r\nclass Map extends React.Component {\r\n\r\n  componentDidMount() {\r\n\r\n    mapboxgl.accessToken = process.env.REACT_APP_MAPTOKEN\r\n\r\n    // restrict map to Finland\r\n    const bounds = [\r\n      [19.274990495527675, 59.64523662578557], // Southwest coordinates\r\n      [31.618656929369678, 70.13546651354179]  // Northeast coordinates\r\n    ];\r\n\r\n    this.map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/mapbox/streets-v9',\r\n      center: [24.7385109, 60.11021],  // TODO: should update to use user location if available\r\n      zoom: 8,\r\n      maxBounds: bounds\r\n    })\r\n\r\n    this.map.addControl(new MapboxLanguage({  defaultLanguage: 'mul' }))\r\n\r\n    this.map.addControl(new MapboxGeocoder({\r\n      accessToken: mapboxgl.accessToken,\r\n      language: 'fi',\r\n      placeholder: 'Etsi...'\r\n    }))\r\n\r\n    this.map.on('load', () => {\r\n      this.map.addSource('hotspots', {\r\n        \"type\": \"geojson\",\r\n        \"data\": {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n        }\r\n      })\r\n\r\n      this.map.addLayer({\r\n        \"id\": \"hotspot\",\r\n        \"source\": \"hotspots\",\r\n        \"type\": \"symbol\",\r\n        \"layout\": {\r\n          \"icon-image\": \"{icon}-15\",\r\n          \"icon-allow-overlap\": true\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n    this.map.on('click', 'hotspot', (e) => {\r\n      e.originalEvent.cancelBubble = true\r\n      this.props.history.push(routes.hotspots + '/' + e.features[0].properties.id)\r\n    })\r\n\r\n    this.map.on('click', (e) => {\r\n      if (e.originalEvent.cancelBubble){\r\n        return\r\n      }\r\n      console.log(e.lngLat.lng + ' ' + e.lngLat.lat)\r\n      if (this.props.isUserLoggedIn) {\r\n        this.props.setNewCoordinates([ e.lngLat.lng, e.lngLat.lat ])\r\n        this.props.history.push(routes.addHotspot)\r\n      } else {\r\n        // TODO: add styles for .mapboxgl-popup\r\n        new mapboxgl.Popup()\r\n          .setLngLat(e.lngLat)\r\n          .setHTML(`<a href=\"${ routes.login }\">Kirjaudu sisään?</a>`)\r\n          .addTo(this.map)\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const source = this.map.getSource('hotspots')\r\n    \r\n    if (source) {\r\n      this.map.getSource('hotspots').setData({\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const mapStyle = {\r\n      position: 'absolute',\r\n      top:0,\r\n      bottom:0,\r\n      width:'100%',\r\n      height:'100%',\r\n      textAlign: 'left',\r\n      marginTop: '43px',\r\n      zIndex: 10\r\n    }\r\n    return (\r\n      <div id='map' style={mapStyle} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.map.hotspots,\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setNewCoordinates,\r\n  addHotspot\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Map))","import axios from 'axios'\r\n\r\nconst getProfile = async (credentials) => {\r\n  const response = await axios.get('/profile/get', credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { getProfile }","import userService from '../services/userService'\r\n\r\nconst initialState = {\r\n  isUserLoggedIn: false\r\n}\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USERLOGGEDIN':\r\n      return {\r\n        ...state,\r\n        isUserLoggedIn: action.loggedIn\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setUserLoggedIn = (loggedIn) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_USERLOGGEDIN',\r\n      loggedIn\r\n    })\r\n  }\r\n}\r\n\r\nexport const checkUserSession = () => {\r\n  return async dispatch => {\r\n    try {\r\n      await userService.getProfile()\r\n      dispatch({\r\n        type: 'SET_USERLOGGEDIN',\r\n        loggedIn: true\r\n      })\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n}\r\n\r\nexport default userReducer","import axios from 'axios'\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post('/login', credentials)\r\n  return response.data\r\n}\r\n\r\nconst logout = async () => {\r\n  const response = await axios.post('/logout', { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst register = async (userInfo) => {\r\n  const response = await axios.post('/register', userInfo)\r\n  return response.data\r\n}\r\n\r\nexport default { login, logout, register }","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Menu, Dropdown, Icon, Container } from 'semantic-ui-react'\r\nimport { setUserLoggedIn } from '../reducers/userReducer'\r\nimport loginService from '../services/loginService'\r\n\r\nclass MenuBar extends React.Component {\r\n\r\n  logout = async () => {\r\n    await loginService.logout()\r\n    this.props.setUserLoggedIn(false)\r\n  }\r\n\r\n  render() {\r\n\r\n    const subMenu = () => {\r\n      if (this.props.isUserLoggedIn) {\r\n        return (\r\n          <Dropdown item icon='bars' direction='left'>\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item onClick={ this.logout }>\r\n                Kirjaudu ulos\r\n                <Icon style={{ paddingLeft: '5px' }} name='log out' />\r\n              </Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        )\r\n      } else {\r\n        return (\r\n          <Menu.Item as={NavLink} exact to={ routes.login }>\r\n            <Icon name='sign in' />\r\n          </Menu.Item>\r\n        )\r\n        /*return (\r\n          <Menu.Item onClick={ this.props.showLoginForm }>\r\n            <Icon name='sign in' />\r\n          </Menu.Item>\r\n        )*/\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Menu attached='top' tabular>\r\n        <Container>\r\n          <Menu.Item>{ appName }</Menu.Item>\r\n          <Menu.Menu position='right'>\r\n            { subMenu() }\r\n          </Menu.Menu>\r\n        </Container>\r\n      </Menu>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setUserLoggedIn\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MenuBar))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Modal, Form, TextArea } from 'semantic-ui-react'\r\nimport { addHotspot } from '../reducers/hotspotReducer'\r\nimport { addHotspot as addHotspotToMap } from '../reducers/mapReducer'\r\nimport { appName } from '../constants'\r\n\r\nclass HotspotForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n\r\n    document.title = appName + '- Lisää kohde'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  addHotspot = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.title.value.length > 0 &&\r\n        event.target.description.value.length > 0) {\r\n\r\n      const hotspotObject = {\r\n        title: event.target.title.value,\r\n        description: event.target.description.value,\r\n        location: {\r\n          type: 'Point',\r\n          coordinates: this.props.coordinates\r\n        }\r\n      }\r\n\r\n      event.target.title.value = ''\r\n      event.target.description.value = ''\r\n\r\n      await this.props.addHotspot(hotspotObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding hotspot...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n        console.log(this.props.newHotspot)\r\n        this.props.addHotspotToMap(this.props.newHotspot)\r\n        this.close()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log('open ' + this.state.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Lisää kohde</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.addHotspot }>\r\n              <div>\r\n                Kohteen nimi:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Havainto:\r\n                <TextArea\r\n                  name=\"description\"\r\n                  style={{ minHeight: 100 }} />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Lisää\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    newHotspot: state.hotspot.newHotspot,\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addHotspot,\r\n  addHotspotToMap\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(HotspotForm))","import React from 'react'\r\nimport { Button, Icon, Label } from 'semantic-ui-react'\r\n\r\nconst VoteButton = ({ id, vote, votes, color, icon, compact, ...rest }) => (\r\n  <Button as='div' labelPosition='right' { ...rest }>\r\n    <Button\r\n      basic\r\n      color={ color }\r\n      type='button'\r\n      onClick={ () => vote(id) }\r\n      compact={ compact }\r\n    >\r\n      <Icon name={ icon } />\r\n    </Button>\r\n    <Label as='a' basic pointing='left'>\r\n      { votes }\r\n    </Label>\r\n  </Button>\r\n)\r\n\r\nexport default VoteButton\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Icon, Popup } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom'\r\nimport { routes } from '../constants'\r\n\r\nclass LoginPromptPopup extends React.Component {\r\n\r\n  render() {\r\n    if (this.props.isUserLoggedIn) {\r\n      return this.props.trigger\r\n    } else {\r\n      return (\r\n        <Popup\r\n          trigger={ this.props.trigger }\r\n          content={\r\n            <Link to={ routes.login }>Kirjaudu sisään? <Icon name='sign in' /></Link>\r\n          }\r\n          on='click'\r\n          hoverable\r\n          position='top right'\r\n        />\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPromptPopup)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Segment, Button, Icon, Divider } from 'semantic-ui-react'\r\nimport { dateFormat } from '../constants'\r\nimport { upVoteComment, downVoteComment } from '../reducers/hotspotReducer'\r\nimport VoteButton from './VoteButton'\r\nimport LoginPromptPopup from './LoginPromptPopup'\r\n\r\nclass Comments extends React.Component {\r\n\r\n  render() {\r\n    console.log(this.props)\r\n    return (\r\n      <div>\r\n        { this.props.comments.map(comment =>\r\n          <div key={ comment.id }>\r\n            <Segment>\r\n              { new Date(comment.createdAt).toLocaleDateString('fi-FI', dateFormat) } lisännyt { comment.addedBy.displayname }\r\n              <Divider hidden />\r\n              <p>{ comment.content }</p>\r\n              <Divider hidden />\r\n              <LoginPromptPopup trigger = {\r\n                <VoteButton\r\n                  id={ comment.id }\r\n                  vote={ this.props.upVoteComment }\r\n                  votes={ comment.upVotes }\r\n                  color='green'\r\n                  icon='thumbs up'\r\n                  compact={ true }\r\n                />\r\n              } />\r\n              <LoginPromptPopup trigger = {\r\n                <VoteButton\r\n                  id={ comment.id }\r\n                  vote={ this.props.downVoteComment }\r\n                  votes={ comment.downVotes }\r\n                  color='orange'\r\n                  icon='thumbs down'\r\n                  compact={ true }\r\n                />\r\n              } />\r\n              <Button compact basic color='red'>\r\n                  <Icon name='flag' />\r\n              </Button>\r\n            </Segment>\r\n            <Divider hidden />\r\n          </div>\r\n        ) }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  upVoteComment,\r\n  downVoteComment\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Comments)","import React from 'react'\r\nimport { Segment, Button, Divider } from 'semantic-ui-react'\r\n\r\nclass Togglable extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      visible: false\r\n    }\r\n  }\r\n\r\n  toggleVisibility = () => {\r\n    this.setState({ visible: !this.state.visible })\r\n  }\r\n\r\n  render() {\r\n    const hideWhenVisible = { display: this.state.visible ? 'none' : '' }\r\n    const showWhenVisible = { display: this.state.visible ? '' : 'none' }\r\n\r\n    return (\r\n      <Segment>\r\n        <div style={hideWhenVisible}>\r\n          <Button onClick={this.toggleVisibility}>{this.props.buttonLabel}</Button>\r\n        </div>\r\n        <div style={showWhenVisible}>\r\n          <Button basic onClick={this.toggleVisibility}>Peruuta</Button>\r\n          <Divider hidden />\r\n          {this.props.children}\r\n        </div>\r\n      </Segment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Togglable","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, TextArea } from 'semantic-ui-react'\r\nimport { addComment } from '../reducers/hotspotReducer'\r\n\r\nclass CommentForm extends Component {\r\n\r\n  addComment = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.comment.value.length > 0) {\r\n\r\n      const commentObject = {\r\n        content: event.target.comment.value,\r\n        inHotspot: this.props.hotspotId\r\n      }\r\n\r\n      event.target.comment.value = ''\r\n\r\n      await this.props.addComment(commentObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding comment...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form onSubmit={ this.addComment }>\r\n      <div>\r\n        <TextArea\r\n          name=\"comment\"\r\n          style={{ minHeight: 100 }} />\r\n      </div>\r\n      <Button type=\"submit\">\r\n        Lisää\r\n      </Button>\r\n    </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addComment\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentForm)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Modal, Icon, Divider, Popup } from 'semantic-ui-react'\r\nimport { upVoteHotspot, downVoteHotspot } from '../reducers/hotspotReducer'\r\nimport Comments from './Comments'\r\nimport Togglable from './Togglable'\r\nimport CommentForm from './CommentForm'\r\nimport VoteButton from './VoteButton'\r\nimport LoginPromptPopup from './LoginPromptPopup'\r\nimport { appName } from '../constants'\r\n\r\nclass Hotspot extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n\r\n    if (props.hotspot) {\r\n      document.title = appName + '- ' + props.hotspot.title\r\n    }\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  render() {\r\n\r\n    if (this.props.hotspot) {\r\n      const hs = this.props.hotspot\r\n\r\n      const showCommentButton = () => {\r\n        if (this.props.isUserLoggedIn) {\r\n          return (\r\n            <Togglable buttonLabel=\"Kommentoi\">\r\n              <CommentForm hotspotId={ hs.id } />\r\n            </Togglable>\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={ this.state.open }\r\n            closeOnDimmerClick={ false }\r\n            onClose={ this.close }\r\n            closeIcon\r\n          >\r\n            <Modal.Header>{ hs.title }</Modal.Header>\r\n            <Modal.Content>\r\n              <LoginPromptPopup trigger={\r\n                <VoteButton\r\n                  id={ hs.id }\r\n                  vote={ this.props.upVoteHotspot }\r\n                  votes={ hs.upVotes }\r\n                  color='green'\r\n                  icon='thumbs up'\r\n                />\r\n              } />\r\n              <LoginPromptPopup trigger={\r\n                <VoteButton\r\n                  id={ hs.id }\r\n                  vote={ this.props.downVoteHotspot }\r\n                  votes={ hs.downVotes }\r\n                  color='orange'\r\n                  icon='thumbs down'\r\n                />\r\n               } />\r\n              <Button basic color='red'>\r\n                    <Icon name='flag' />\r\n              </Button>\r\n              <Divider hidden />\r\n              { hs.description }\r\n              <Divider hidden />\r\n              { showCommentButton() }\r\n              <Comments comments={ hs.comments } />\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={this.state.open}\r\n            closeOnDimmerClick={false}\r\n            onClose={this.close}\r\n            closeIcon\r\n          >\r\n            <Modal.Header>Kohdetta ei löytynyt!</Modal.Header>\r\n            <Modal.Content>\r\n              <p>Jotain meni pieleen.</p>\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.user.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  upVoteHotspot,\r\n  downVoteHotspot\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Hotspot))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Button, Modal, Form, Icon } from 'semantic-ui-react'\r\nimport { setUserLoggedIn } from '../reducers/userReducer'\r\nimport loginService from '../services/loginService'\r\n\r\nclass LoginForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open\r\n    }\r\n    document.title = appName + '- Kirjaudu'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({ open: false })\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  login = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.username.value.length > 0 &&\r\n        event.target.password.value.length > 0) {\r\n      try {\r\n        await loginService.login({\r\n          username: event.target.username.value,\r\n          password: event.target.password.value\r\n        })\r\n        this.props.setUserLoggedIn(true)\r\n        this.close()\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Tervetuloa!</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.login }>\r\n              <div>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                />\r\n              </div>\r\n              <Button type=\"submit\" icon labelPosition='right'>\r\n                Kirjaudu sisään\r\n                <Icon name='sign in' />\r\n              </Button>\r\n              <Link to={{\r\n                  pathname: routes.register,\r\n                  state: { open: true }\r\n                }}\r\n              >Rekisteröidy?</Link>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setUserLoggedIn\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(LoginForm))","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { routes, appName } from '../constants'\r\nimport { Button, Modal, Form, Segment } from 'semantic-ui-react'\r\nimport loginService from '../services/loginService'\r\n\r\nclass RegisterForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: props.open,\r\n      username: '',\r\n      password: '',\r\n      passwordConf: '',\r\n      displayname: '',\r\n      email: '',\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false,\r\n      errorMessages: []\r\n    }\r\n\r\n    document.title = appName + '- Rekisteröidy'\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({\r\n      open: false,\r\n      username: '',\r\n      password: '',\r\n      passwordConf: '',\r\n      displayname: '',\r\n      email: '',\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false,\r\n      errorMessages: []\r\n    })\r\n    this.props.history.push(routes.login)\r\n  }\r\n\r\n  register = async (event) => {\r\n    event.preventDefault()\r\n\r\n    this.setState({\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false\r\n    })\r\n\r\n    if (this.state.username.length < 6) {\r\n      await this.setState({\r\n        usernameError: true,\r\n        errorMessages: this.state.errorMessages.concat('Käyttäjätunnuksen täytyy olla vähintään 6 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.password.length < 8 ||\r\n        this.state.password !== this.state.passwordConf) {\r\n      await this.setState({\r\n        passwordError: true,\r\n        errorMessages: this.state.errorMessages.concat('Salasanan täytyy olla vähintään 8 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.displayname.length < 6) {\r\n      await this.setState({\r\n        displaynameError: true,\r\n        errorMessages: this.state.errorMessages.concat('Käyttäjänimen täytyy olla vähintään 6 merkkiä pitkä.')\r\n      })\r\n    }\r\n    if (this.state.email.length < 6) {\r\n      await this.setState({\r\n        emailError: true,\r\n        errorMessages: this.state.errorMessages.concat('Anna toimiva sähköpostiosoite.')\r\n      })\r\n    }\r\n\r\n    if (this.state.usernameError ||\r\n        this.state.passwordError ||\r\n        this.state.displaynameError ||\r\n        this.state.emailError) {\r\n\r\n      return\r\n\r\n    } else {\r\n      const userObject = {\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n        displayname: this.state.displayname,\r\n        email: this.state.email\r\n      }\r\n\r\n      try {\r\n        await loginService.register(userObject)\r\n        this.close()\r\n\r\n      } catch (error) {\r\n        console.log('Virhe rekisteröinnissä...')\r\n        console.log(error)\r\n        if (error.response.status === 409) {\r\n          if (error.response.data.message === 'username or email address already in use ') {\r\n            this.setState({\r\n              errorMessages: ['Annettua sähköpostiosoitetta on jo käytetty rekisteröitymiseen.']\r\n            })\r\n          } else {\r\n            this.setState({\r\n              errorMessages: ['Käyttäjätunnusta ei voitu rekisteröidä. Tarkista tiedot.']\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value })\r\n  }\r\n\r\n  render() {\r\n    const showWhenError = { display: this.state.errorMessages.length > 0 ? '' : 'none' }\r\n\r\n    console.log('open ' + this.state.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.state.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Rekisteröidy käyttäjäksi</Modal.Header>\r\n          <Modal.Content>\r\n            <Segment style={ showWhenError } color='red' inverted secondary>\r\n              Huomioithan seuraavat:\r\n              <ul>\r\n                { this.state.errorMessages.map(error => {\r\n                  return (<li key={error}>{error}</li>)\r\n                })\r\n                }\r\n              </ul>\r\n            </Segment>\r\n            <Form onSubmit={ this.register }>\r\n              <Form.Field>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  error={ this.state.usernameError }\r\n                  onChange={ this.handleChange }\r\n                  attached='top'\r\n                />                \r\n              </Form.Field>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana uudelleen:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"passwordConf\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Nimimerkki:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"displayname\"\r\n                  error={ this.state.displaynameError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Sähköpostiosoite:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  error={ this.state.emailError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Rekisteröidy\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(RegisterForm)","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Route, withRouter } from 'react-router-dom'\r\nimport Map from './components/Map'\r\nimport MenuBar from './components/MenuBar'\r\nimport HotspotForm from './components/HotspotForm'\r\nimport Hotspot from './components/Hotspot'\r\nimport LoginForm from './components/LoginForm'\r\nimport RegisterForm from './components/RegisterForm'\r\nimport { initialiseHotspots } from './reducers/hotspotReducer'\r\nimport { setHotspotsOnMap } from './reducers/mapReducer'\r\nimport { routes, appName } from './constants'\r\nimport { checkUserSession } from './reducers/userReducer'\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  async componentDidMount() {\r\n    await this.props.initialiseHotspots()\r\n    if (this.props.hotspots) {\r\n      console.log(this.props.hotspots)\r\n      this.props.setHotspotsOnMap(this.props.hotspots)\r\n    }\r\n    this.props.checkUserSession()\r\n  }\r\n\r\n  render() {\r\n    const hotspotById = (id) => {\r\n      const hotspot = this.props.hotspots.find(hotspot => hotspot.id === id)\r\n      return hotspot\r\n    }\r\n\r\n    document.title = appName\r\n    return (\r\n      <div>\r\n        <div>\r\n          <MenuBar />\r\n        </div>\r\n        <div id='mapPopup' />\r\n        <div id='mapComponent'>\r\n          <Map />\r\n        </div>\r\n        <Route exact\r\n          path={ `${routes.hotspots}/:id` }\r\n          render={ ({ match }) =>\r\n            <Hotspot\r\n              open={ true }\r\n              hotspot={ hotspotById(match.params.id) }\r\n            />\r\n          }\r\n        />\r\n        <Route exact path={ routes.addHotspot } render={ ({ match }) =>\r\n          <HotspotForm\r\n            open={ true }\r\n            coordinates={ this.props.coordinates }\r\n          /> }\r\n        />\r\n        <Route exact path={ routes.login } render={ ({ match }) =>\r\n          <LoginForm open={ true } /> }\r\n        />\r\n        <Route exact path={ routes.register } render={ ({ match }) =>\r\n          <RegisterForm open={ true } /> }\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.hotspot.hotspots,\r\n    coordinates: state.hotspot.newCoordinates\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  initialiseHotspots,\r\n  setHotspotsOnMap,\r\n  checkUserSession\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App))\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport mapReducer from './reducers/mapReducer'\r\nimport userReducer from './reducers/userReducer'\r\nimport hotspotReducer from './reducers/hotspotReducer'\r\n//import userReducer from './reducers/userReducer'\r\n\r\nconst reducer = combineReducers({\r\n  map: mapReducer,\r\n  user: userReducer,\r\n  hotspot: hotspotReducer\r\n})\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n  )\r\n)\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)"],"sourceRoot":""}