{"version":3,"sources":["reducers/mapReducer.js","constants.js","reducers/viewReducer.js","services/hotspotService.js","services/commentService.js","reducers/hotspotReducer.js","components/Map.js","services/loginService.js","components/MenuBar.js","components/HotspotForm.js","components/Comments.js","components/Togglable.js","components/CommentForm.js","components/Hotspot.js","components/LoginForm.js","components/RegisterForm.js","App.js","store.js","index.js"],"names":["initialState","hotspots","type","properties","id","icon","geometry","coordinates","addHotspot","hotspot","dispatch","newHotspot","location","console","log","mapReducer","state","arguments","length","undefined","action","concat","views","dateFormat","year","month","day","hour","minute","newCoordinates","newLng","newLat","showing","previousView","isUserLoggedIn","setUserLoggedIn","loggedIn","viewReducer","Object","objectSpread","baseUrl","hotspotService","getAll","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","response","wrap","_context","prev","next","axios","get","sent","abrupt","data","stop","this","apply","getHotspotsByCoordinates","_ref2","_callee2","lng","lat","_context2","_x","_x2","getHotspot","_ref3","_callee3","_context3","_x3","create","_ref4","_callee4","_context4","post","withCredentials","_x4","commentService","comment","currentHotspot","error","hotspotReducer","find","hs","inHotspot","comments","map","Map","_this","mapboxgl","accessToken","process","container","style","center","zoom","maxBounds","addControl","MapboxLanguage","defaultLanguage","MapboxGeocoder","language","placeholder","on","addSource","features","props","addLayer","source","layout","icon-image","icon-allow-overlap","e","originalEvent","cancelBubble","setCurrentHotspot","showHotspot","lngLat","showHotspotForm","getSource","setData","react_default","createElement","position","top","bottom","width","height","textAlign","marginTop","zIndex","React","Component","mapDispatchToProps","connect","view","loginService","login","credentials","logout","register","userInfo","MenuBar","_this2","Menu","attached","tabular","Container","Item","Dropdown","item","direction","onClick","Icon","paddingLeft","name","showLoginForm","withRouter","HotspotForm","close","hideHotspotForm","event","hotspotObject","preventDefault","target","title","value","description","addHotspotToMap","open","Modal","closeOnDimmerClick","onClose","closeIcon","Header","Content","Form","onSubmit","Input","TextArea","minHeight","Button","t0","Comments","key","Segment","Date","createdAt","toLocaleDateString","addedBy","Divider","hidden","content","as","labelPosition","compact","basic","color","Label","pointing","upVotes","downVotes","Togglable","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","toggleVisibility","setState","visible","hideWhenVisible","display","showWhenVisible","buttonLabel","children","CommentForm","addComment","commentObject","hotspotId","newComment","Hotspot","hideHotspot","components_Togglable","components_CommentForm","components_Comments","LoginForm","history","push","hideLoginForm","username","password","onOpen","showRegisterForm","RegisterForm","hideRegisterForm","userObject","usernameError","passwordError","displaynameError","emailError","passwordConf","displayname","email","handleChange","defineProperty","onChange","App","initialiseHotspots","setHotspotsOnMap","components_MenuBar","components_Map","components_HotspotForm","components_Hotspot","components_LoginForm","components_RegisterForm","hotspotFeatures","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","render","ReactDOM","es","BrowserRouter","src_App","document","getElementById","subscribe"],"mappings":"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","file":"static/js/main.4dae3f53.chunk.js","sourcesContent":["const initialState = {\r\n  hotspots:  [\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e0b21ee7a321eb40f3e12\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [24.8297076, 60.3190656]\r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": \"5c1e2ecbc969793cecad491a\",\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [25, 60.2]\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nconst mapReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_HOTSPOTS':\r\n      return {\r\n        hotspots: action.hotspots\r\n      }\r\n    case 'ADD_HOTSPOT':\r\n      return {\r\n        hotspots: state.hotspots.concat(action.hotspot)\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setHotspotsOnMap = (hotspots) => {\r\n  return dispatch => {\r\n    const hotspotFeatures = hotspots.map(hs => {\r\n      return {\r\n        'type': 'Feature',\r\n        'properties': {\r\n          'id': hs.id,\r\n          'icon': 'star'\r\n        },\r\n        'geometry': {\r\n          'type': 'Point',\r\n          'coordinates': hs.location.coordinates\r\n        }\r\n      }\r\n    })\r\n    console.log(hotspotFeatures)\r\n    dispatch({\r\n      type: 'SET_HOTSPOTS',\r\n      hotspots: hotspotFeatures\r\n    })\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return dispatch => {\r\n    let newHotspot = {\r\n      \"type\": \"Feature\",\r\n      \"properties\": {\r\n        \"id\": hotspot.id,\r\n        \"icon\": \"star\"\r\n      },\r\n      \"geometry\": {\r\n        'type': 'Point',\r\n        'coordinates': hotspot.location.coordinates\r\n      }\r\n    }\r\n    console.log(newHotspot)\r\n    console.log(hotspot.location)\r\n    dispatch({\r\n      type: 'ADD_HOTSPOT',\r\n      hotspot: newHotspot\r\n    })\r\n  }\r\n}\r\n\r\nexport default mapReducer","const views = {\r\n  MAP: 'MAP',\r\n  HOTSPOTFORM: 'HOTSPOTFORM',\r\n  HOTSPOT: 'HOTSPOT',\r\n  LOGINFORM: 'LOGINFORM',\r\n  REGISTERFORM: 'REGISTERFORM'\r\n}\r\n\r\nconst dateFormat = {\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  hour: 'numeric',\r\n  minute: 'numeric'\r\n}\r\n\r\nexport { views, dateFormat }","import { views }  from '../constants'\r\n\r\nconst initialState = {\r\n  newCoordinates: [],\r\n  newLng: 0,\r\n  newLat: 0,\r\n  hotspot: null,\r\n  showing: views.MAP,\r\n  previousView: views.MAP,\r\n  isUserLoggedIn: false\r\n}\r\n\r\nconst viewReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SHOW_HOTSPOT_FORM':\r\n      return {\r\n        ...state,\r\n        newCoordinates: action.newCoordinates,\r\n        showing: views.HOTSPOTFORM\r\n      }\r\n    case 'SHOW_MAP':\r\n      return {\r\n        ...state,\r\n        showing: views.MAP\r\n      }\r\n    case 'SHOW_PREVIOUS':\r\n      return {\r\n        ...state,\r\n        showing: state.previousView,\r\n        previousView: views.MAP\r\n      }\r\n    case 'SHOW_HOTSPOT':\r\n      return {\r\n        ...state,\r\n        showing: views.HOTSPOT\r\n      }\r\n    case 'HIDE_HOTSPOT':\r\n      return {\r\n        ...state,\r\n        showing: views.MAP\r\n      }\r\n    case 'SHOW_LOGINFORM':\r\n      return {\r\n        ...state,\r\n        previousView: state.showing,\r\n        showing: views.LOGINFORM\r\n      }\r\n    case 'SHOW_REGISTERFORM':\r\n      return {\r\n        ...state,\r\n        previousView: state.showing,\r\n        showing: views.REGISTERFORM\r\n      }\r\n    case 'SET_USERLOGGEDIN':\r\n      return {\r\n        ...state,\r\n        isUserLoggedIn: action.loggedIn\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const showHotspotForm = (newCoordinates) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SHOW_HOTSPOT_FORM',\r\n      newCoordinates\r\n    })\r\n  }\r\n}\r\n\r\nexport const hideHotspotForm = () => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SHOW_MAP'\r\n    })\r\n  }\r\n}\r\n\r\nexport const hideHotspot = () => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SHOW_MAP'\r\n    })\r\n  }\r\n}\r\n\r\nexport const showHotspot = (id) => {\r\n  return dispatch => {\r\n      dispatch({\r\n        type: 'SHOW_HOTSPOT'\r\n      })\r\n  }\r\n}\r\n\r\nexport const showLoginForm = () => {\r\n  return dispatch => {\r\n      dispatch({\r\n        type: 'SHOW_LOGINFORM'\r\n      })\r\n  }\r\n}\r\n\r\nexport const hideLoginForm = () => {\r\n  return dispatch => {\r\n      dispatch({\r\n        type: 'SHOW_PREVIOUS'\r\n      })\r\n  }\r\n}\r\n\r\nexport const showRegisterForm = () => {\r\n  return dispatch => {\r\n      dispatch({\r\n        type: 'SHOW_REGISTERFORM'\r\n      })\r\n  }\r\n}\r\n\r\nexport const hideRegisterForm = () => {\r\n  return dispatch => {\r\n      dispatch({\r\n        type: 'SHOW_PREVIOUS'\r\n      })\r\n  }\r\n}\r\n\r\nexport const setUserLoggedIn = (loggedIn) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_USERLOGGEDIN',\r\n      loggedIn\r\n    })\r\n  }\r\n}\r\n\r\nexport default viewReducer","import axios from 'axios'\r\nconst baseUrl = '/api/hotspots'\r\n\r\nconst getAll = async () => {\r\n  const response = await axios.get(baseUrl)\r\n  return response.data\r\n}\r\n\r\nconst getHotspotsByCoordinates = async (lng, lat) => {\r\n  const response = await axios.get(`${baseUrl}/@${lng},${lat}`)\r\n  return response.data\r\n}\r\n\r\nconst getHotspot = async (id) => {\r\n  const response = await axios.get(`${baseUrl}/${id}`)\r\n  return response.data\r\n}\r\n\r\nconst create = async (hotspot) => {\r\n  const response = await axios.post(baseUrl, hotspot, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, getHotspotsByCoordinates, getHotspot, create }","import axios from 'axios'\r\nconst baseUrl = '/api/comments'\r\n\r\nconst create = async (comment) => {\r\n  const response = await axios.post(baseUrl, comment, { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nexport default { create }","import hotspotService from '../services/hotspotService'\r\nimport commentService from '../services/commentService'\r\n\r\nconst initialState = {\r\n  hotspots:  [],\r\n  currentHotspot: null,\r\n  newHotspot: null,\r\n  error: null\r\n}\r\n\r\nconst hotspotReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'GET_HOTSPOTS_SUCCESS':\r\n      return {\r\n        hotspots: action.hotspots,\r\n        error: null\r\n      }\r\n    case 'GET_HOTSPOTS_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'SET_CURRENT_HOTSPOT':\r\n      return {\r\n        ...state,\r\n        currentHotspot: state.hotspots.find(hs => hs.id === action.id),\r\n        error: null\r\n      }\r\n    case 'ADD_HOTSPOT_SUCCESS':\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.concat(action.hotspot),\r\n        newHotspot: action.hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_HOTSPOT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    case 'ADD_COMMENT_SUCCESS':\r\n      const hotspot = {...state.hotspots.find(hs => hs.id === action.comment.inHotspot.id)}\r\n      hotspot.comments = hotspot.comments.concat(action.comment)\r\n      return {\r\n        ...state,\r\n        hotspots: state.hotspots.map(hs =>\r\n          hs.id === hotspot.id\r\n          ? hotspot\r\n          : hs),\r\n        currentHotspot: hotspot,\r\n        error: null\r\n      }\r\n    case 'ADD_COMMENT_FAIL':\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const initialiseHotspots = () => {\r\n  return async dispatch => {\r\n    try {\r\n      const hotspots = await hotspotService.getAll()\r\n      console.log(hotspots)\r\n      dispatch({\r\n        type:'GET_HOTSPOTS_SUCCESS',\r\n        hotspots\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'GET_HOTSPOTS_FAIL',\r\n        error: 'Virhe kohteiden haussa! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const addHotspot = (hotspot) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newHotspot = await hotspotService.create(hotspot)\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_SUCCESS',\r\n        hotspot: newHotspot\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_HOTSPOT_FAIL',\r\n        error: 'Kohdetta ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const setCurrentHotspot = (id) => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'SET_CURRENT_HOTSPOT',\r\n      id\r\n    })\r\n  }\r\n}\r\n\r\nexport const addComment = (comment) => {\r\n  return async dispatch => {\r\n    try {\r\n      const newComment = await commentService.create(comment)\r\n      dispatch({\r\n        type: 'ADD_COMMENT_SUCCESS',\r\n        comment: newComment\r\n      })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'ADD_COMMENT_FAIL',\r\n        error: 'Kommentia ei voitu lisätä! ' + error\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default hotspotReducer","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\r\nimport MapboxLanguage from '@mapbox/mapbox-gl-language'\r\nimport { addHotspot } from '../reducers/mapReducer'\r\nimport { showHotspotForm, showHotspot } from '../reducers/viewReducer'\r\nimport { setCurrentHotspot } from '../reducers/hotspotReducer'\r\n\r\nclass Map extends React.Component {\r\n\r\n  componentDidMount() {\r\n\r\n    mapboxgl.accessToken = process.env.REACT_APP_MAPTOKEN\r\n\r\n    // restrict map to Finland\r\n    const bounds = [\r\n      [19.274990495527675, 59.64523662578557], // Southwest coordinates\r\n      [31.618656929369678, 70.13546651354179]  // Northeast coordinates\r\n    ];\r\n\r\n    this.map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/mapbox/streets-v9',\r\n      center: [24.7385109, 60.11021],  // TODO: should update to use user location if available\r\n      zoom: 8,\r\n      maxBounds: bounds\r\n    })\r\n\r\n    this.map.addControl(new MapboxLanguage({  defaultLanguage: 'mul' }))\r\n\r\n    this.map.addControl(new MapboxGeocoder({\r\n      accessToken: mapboxgl.accessToken,\r\n      language: 'fi',\r\n      placeholder: 'Etsi...'\r\n    }))\r\n\r\n    this.map.on('load', () => {\r\n      this.map.addSource('hotspots', {\r\n        \"type\": \"geojson\",\r\n        \"data\": {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n        }\r\n      })\r\n\r\n      this.map.addLayer({\r\n        \"id\": \"hotspot\",\r\n        \"source\": \"hotspots\",\r\n        \"type\": \"symbol\",\r\n        \"layout\": {\r\n          \"icon-image\": \"{icon}-15\",\r\n          \"icon-allow-overlap\": true\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n    this.map.on('click', 'hotspot', (e) => {\r\n      e.originalEvent.cancelBubble = true\r\n      this.props.setCurrentHotspot(e.features[0].properties.id)\r\n      this.props.showHotspot()\r\n    })\r\n\r\n    this.map.on('click', (e) => {\r\n      if (e.originalEvent.cancelBubble){\r\n        return\r\n      }\r\n      console.log(e.lngLat.lng + ' ' + e.lngLat.lat)\r\n      if (this.props.isUserLoggedIn) {\r\n        this.props.showHotspotForm([ e.lngLat.lng, e.lngLat.lat ])\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const source = this.map.getSource('hotspots')\r\n    \r\n    if (source) {\r\n      this.map.getSource('hotspots').setData({\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": this.props.hotspots\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const mapStyle = {\r\n      position: 'absolute',\r\n      top:0,\r\n      bottom:0,\r\n      width:'100%',\r\n      height:'100%',\r\n      textAlign: 'left',\r\n      marginTop: '43px',\r\n      zIndex: 10\r\n    }\r\n    return (\r\n      <div id='map' style={mapStyle} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.map.hotspots,\r\n    isUserLoggedIn: state.view.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addHotspot,\r\n  showHotspotForm,\r\n  showHotspot,\r\n  setCurrentHotspot\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Map)","import axios from 'axios'\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post('/login', credentials)\r\n  return response.data\r\n}\r\n\r\nconst logout = async () => {\r\n  const response = await axios.post('/logout', { withCredentials: true })\r\n  return response.data\r\n}\r\n\r\nconst register = async (userInfo) => {\r\n  const response = await axios.post('/register', userInfo)\r\n  return response.data\r\n}\r\n\r\nexport default { login, logout, register }","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport { Menu, Dropdown, Icon, Container } from 'semantic-ui-react'\r\nimport { showLoginForm, setUserLoggedIn } from '../reducers/viewReducer'\r\nimport loginService from '../services/loginService'\r\n\r\nclass MenuBar extends React.Component {\r\n\r\n  logout = async () => {\r\n    await loginService.logout()\r\n    this.props.setUserLoggedIn(false)\r\n  }\r\n\r\n  render() {\r\n\r\n    const subMenu = () => {\r\n      if (this.props.isUserLoggedIn) {\r\n        return (\r\n          <Dropdown item icon='bars' direction='left'>\r\n            <Dropdown.Menu>\r\n              <Dropdown.Item onClick={ this.logout }>\r\n                Kirjaudu ulos\r\n                <Icon style={{ paddingLeft: '5px' }} name='log out' />\r\n              </Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        )\r\n      } else {\r\n        return (\r\n          <Menu.Item onClick={ this.props.showLoginForm }>\r\n            <Icon name='sign in' />\r\n          </Menu.Item>\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Menu attached='top' tabular>\r\n        <Container>\r\n          <Menu.Item>Luontovahdit</Menu.Item>\r\n          <Menu.Menu position='right'>\r\n            { subMenu() }\r\n          </Menu.Menu>\r\n        </Container>\r\n      </Menu>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isUserLoggedIn: state.view.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  showLoginForm,\r\n  setUserLoggedIn\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MenuBar))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Modal, Form, TextArea } from 'semantic-ui-react'\r\nimport { hideHotspotForm } from '../reducers/viewReducer'\r\nimport { addHotspot } from '../reducers/hotspotReducer'\r\nimport { addHotspot as addHotspotToMap } from '../reducers/mapReducer'\r\nimport { views } from '../constants'\r\n\r\nclass HotspotForm extends Component {\r\n\r\n  close = () => this.props.hideHotspotForm()\r\n\r\n  addHotspot = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.title.value.length > 0 &&\r\n        event.target.description.value.length > 0) {\r\n\r\n      const hotspotObject = {\r\n        title: event.target.title.value,\r\n        description: event.target.description.value,\r\n        location: {\r\n          type: 'Point',\r\n          coordinates: this.props.coordinates\r\n        }\r\n      }\r\n\r\n      event.target.title.value = ''\r\n      event.target.description.value = ''\r\n\r\n      await this.props.addHotspot(hotspotObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding hotspot...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n        console.log(this.props.newHotspot)\r\n        this.props.addHotspotToMap(this.props.newHotspot)\r\n        this.props.hideHotspotForm()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log('open ' + this.props.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.props.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Lisää kohde</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.addHotspot }>\r\n              <div>\r\n                Kohteen nimi:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Havainto:\r\n                <TextArea\r\n                  name=\"description\"\r\n                  style={{ minHeight: 100 }} />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Lisää\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    open: state.view.showing === views.HOTSPOTFORM,\r\n    coordinates: state.view.newCoordinates,\r\n    newHotspot: state.hotspot.newHotspot,\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hideHotspotForm,\r\n  addHotspot,\r\n  addHotspotToMap\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HotspotForm)","import React from 'react'\r\nimport { Segment, Label, Button, Icon, Header, Divider } from 'semantic-ui-react'\r\nimport { dateFormat } from '../constants'\r\n\r\nclass Comments extends React.Component {\r\n\r\n  render() {\r\n    console.log(this.props)\r\n    return (\r\n      <div>\r\n        { this.props.comments.map(comment =>\r\n          <div key={ comment.id }>\r\n            <Segment>\r\n              { new Date(comment.createdAt).toLocaleDateString('fi-FI', dateFormat) } lisännyt { comment.addedBy.name }\r\n              <Divider hidden />\r\n              <p>{ comment.content }</p>\r\n              <Divider hidden />\r\n              <Button as='div' labelPosition='right'>\r\n                <Button compact basic color='green'>\r\n                  <Icon name='thumbs up' />\r\n                </Button>\r\n                <Label basic pointing='left'>\r\n                  { comment.upVotes }\r\n                </Label>\r\n              </Button>\r\n              <Button as='div' labelPosition='right'>\r\n                <Button compact basic color='orange'>\r\n                  <Icon name='thumbs down' />\r\n                </Button>\r\n                <Label as='a' basic pointing='left'>\r\n                  { comment.downVotes }\r\n                </Label>\r\n              </Button>\r\n              <Button compact basic color='red'>\r\n                  <Icon name='flag' />\r\n              </Button>\r\n            </Segment>\r\n            <Divider hidden />\r\n          </div>\r\n        ) }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Comments","import React from 'react'\r\nimport { Segment, Button, Divider } from 'semantic-ui-react'\r\n\r\nclass Togglable extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      visible: false\r\n    }\r\n  }\r\n\r\n  toggleVisibility = () => {\r\n    this.setState({ visible: !this.state.visible })\r\n  }\r\n\r\n  render() {\r\n    const hideWhenVisible = { display: this.state.visible ? 'none' : '' }\r\n    const showWhenVisible = { display: this.state.visible ? '' : 'none' }\r\n\r\n    return (\r\n      <Segment>\r\n        <div style={hideWhenVisible}>\r\n          <Button onClick={this.toggleVisibility}>{this.props.buttonLabel}</Button>\r\n        </div>\r\n        <div style={showWhenVisible}>\r\n          <Button basic onClick={this.toggleVisibility}>Peruuta</Button>\r\n          <Divider hidden />\r\n          {this.props.children}\r\n        </div>\r\n      </Segment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Togglable","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, TextArea } from 'semantic-ui-react'\r\nimport { addComment } from '../reducers/hotspotReducer'\r\n\r\nclass CommentForm extends Component {\r\n\r\n  addComment = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.comment.value.length > 0) {\r\n\r\n      const commentObject = {\r\n        content: event.target.comment.value,\r\n        inHotspot: this.props.hotspotId\r\n      }\r\n\r\n      event.target.comment.value = ''\r\n\r\n      await this.props.addComment(commentObject)\r\n\r\n      if (this.props.error) {\r\n        console.log('Error adding comment...')\r\n        console.log(this.props.error)\r\n      } else {\r\n        console.log('Added hotspot!')\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form onSubmit={ this.addComment }>\r\n      <div>\r\n        <TextArea\r\n          name=\"comment\"\r\n          style={{ minHeight: 100 }} />\r\n      </div>\r\n      <Button type=\"submit\">\r\n        Lisää\r\n      </Button>\r\n    </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.hotspot.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addComment\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentForm)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Modal, Icon, Label, Divider, Segment } from 'semantic-ui-react'\r\nimport { hideHotspot } from '../reducers/viewReducer'\r\nimport { views } from '../constants'\r\nimport Comments from './Comments'\r\nimport Togglable from './Togglable'\r\nimport CommentForm from './CommentForm'\r\n\r\nclass Hotspot extends Component {\r\n\r\n  close = () => this.props.hideHotspot()\r\n\r\n  render() {\r\n\r\n    if (this.props.hotspot) {\r\n      const hs = this.props.hotspot\r\n\r\n      const showCommentButton = () => {\r\n        if (this.props.isUserLoggedIn) {\r\n          return (\r\n            <Togglable buttonLabel=\"Kommentoi\">\r\n              <CommentForm hotspotId={ hs.id } />\r\n            </Togglable>\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={ this.props.open }\r\n            closeOnDimmerClick={ false }\r\n            onClose={ this.close }\r\n            closeIcon\r\n          >\r\n            <Modal.Header>{ hs.title }</Modal.Header>\r\n            <Modal.Content>\r\n              <Button as='div' labelPosition='right'>\r\n                <Button basic color='green'>\r\n                  <Icon name='thumbs up' />\r\n                </Button>\r\n                <Label as='a' basic pointing='left'>\r\n                  { hs.upVotes }\r\n                </Label>\r\n              </Button>\r\n              <Button as='div' labelPosition='right'>\r\n                <Button basic color='orange'>\r\n                  <Icon name='thumbs down' />\r\n                </Button>\r\n                <Label as='a' basic pointing='left'>\r\n                  { hs.downVotes }\r\n                </Label>\r\n              </Button>\r\n              <Button basic color='red'>\r\n                  <Icon name='flag' />\r\n              </Button>\r\n              lisännyt { hs.addedBy.name }\r\n              <Divider hidden />\r\n              { hs.description }\r\n              <Divider hidden />\r\n              { showCommentButton() }\r\n              <Comments comments={ hs.comments } />\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Modal\r\n            open={this.props.open}\r\n            closeOnDimmerClick={false}\r\n            onClose={this.close}\r\n            closeIcon\r\n          >\r\n            <Modal.Header>Kohdetta ei löytynyt!</Modal.Header>\r\n            <Modal.Content>\r\n              <p>Jotain meni pieleen.</p>\r\n            </Modal.Content>\r\n          </Modal>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    open: state.view.showing === views.HOTSPOT,\r\n    hotspot: state.hotspot.currentHotspot,\r\n    isUserLoggedIn: state.view.isUserLoggedIn\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hideHotspot\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Hotspot)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Modal, Form, Icon } from 'semantic-ui-react'\r\nimport { hideLoginForm, setUserLoggedIn, showRegisterForm } from '../reducers/viewReducer'\r\nimport { views } from '../constants'\r\nimport loginService from '../services/loginService'\r\n\r\nclass LoginForm extends Component {\r\n\r\n  open = () => {\r\n    this.props.history.push('/login')\r\n  }\r\n\r\n  close = () => {\r\n    this.props.hideLoginForm()\r\n    this.props.history.push('/')\r\n  }\r\n\r\n  login = async (event) => {\r\n    event.preventDefault()\r\n\r\n    if (event.target.username.value.length > 0 &&\r\n        event.target.password.value.length > 0) {\r\n      try {\r\n        await loginService.login({\r\n          username: event.target.username.value,\r\n          password: event.target.password.value\r\n        })\r\n        this.props.setUserLoggedIn(true)\r\n        this.props.hideLoginForm()\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.props.open}\r\n          closeOnDimmerClick={false}\r\n          onOpen={this.open}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Tervetuloa!</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.login }>\r\n              <div>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                />\r\n              </div>\r\n              <Button type=\"submit\" icon labelPosition='right'>\r\n                Kirjaudu sisään\r\n                <Icon name='sign in' />\r\n              </Button>\r\n              <Button type=\"button\" onClick={ this.props.showRegisterForm }>\r\n                Rekisteröidy?\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    open: state.view.showing === views.LOGINFORM\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hideLoginForm,\r\n  setUserLoggedIn,\r\n  showRegisterForm\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoginForm))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Modal, Form } from 'semantic-ui-react'\r\nimport { hideRegisterForm } from '../reducers/viewReducer'\r\nimport { views } from '../constants'\r\nimport loginService from '../services/loginService'\r\n\r\nclass RegisterForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      passwordConf: '',\r\n      displayname: '',\r\n      email: '',\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false\r\n    }\r\n  }\r\n\r\n  close = () => this.props.hideRegisterForm()\r\n\r\n  register = async (event) => {\r\n    event.preventDefault()\r\n\r\n    this.setState({\r\n      usernameError: false,\r\n      passwordError: false,\r\n      displaynameError: false,\r\n      emailError: false\r\n    })\r\n\r\n    if (this.state.username.length < 6) {\r\n      await this.setState({ usernameError: true })\r\n    }\r\n    if (this.state.password.length < 8 ||\r\n        this.state.password !== this.state.passwordConf) {\r\n      await this.setState({ passwordError: true })\r\n    }\r\n    if (this.state.displayname.length < 6) {\r\n      await this.setState({ displaynameError: true })\r\n    }\r\n    if (this.state.email.length < 6) {\r\n      await this.setState({ emailError: true })\r\n    }\r\n\r\n    if (this.state.usernameError ||\r\n        this.state.passwordError ||\r\n        this.state.displaynameError ||\r\n        this.state.emailError) {\r\n\r\n      return\r\n\r\n    } else {\r\n      const userObject = {\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n        displayname: this.state.displayname,\r\n        email: this.state.email\r\n      }\r\n\r\n      try {\r\n        await loginService.register(userObject)\r\n        this.props.hideRegisterForm()\r\n\r\n      } catch (error) {\r\n        console.log('Virhe rekisteröinnissä...')\r\n        console.log(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value })\r\n  }\r\n\r\n  render() {\r\n    console.log('open ' + this.props.open)\r\n    return (\r\n      <div>\r\n        <Modal\r\n          open={this.props.open}\r\n          closeOnDimmerClick={false}\r\n          onClose={this.close}\r\n          closeIcon\r\n        >\r\n          <Modal.Header>Rekisteröidy käyttäjäksi</Modal.Header>\r\n          <Modal.Content>\r\n            <Form onSubmit={ this.register }>\r\n              <div>\r\n                Käyttäjätunnus:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  error={ this.state.usernameError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Salasana uudelleen:\r\n                <Form.Input\r\n                  type=\"password\"\r\n                  name=\"passwordConf\"\r\n                  error={ this.state.passwordError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Nimimerkki:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"displayname\"\r\n                  error={ this.state.displaynameError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <div>\r\n                Sähköpostiosoite:\r\n                <Form.Input\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  error={ this.state.emailError }\r\n                  onChange={ this.handleChange }\r\n                />\r\n              </div>\r\n              <Button type=\"submit\">\r\n                Rekisteröidy\r\n              </Button>\r\n            </Form>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    open: state.view.showing === views.REGISTERFORM\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  hideRegisterForm\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm)","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Route } from 'react-router-dom'\r\nimport Map from './components/Map'\r\nimport MenuBar from './components/MenuBar'\r\nimport HotspotForm from './components/HotspotForm'\r\nimport Hotspot from './components/Hotspot'\r\nimport LoginForm from './components/LoginForm'\r\nimport RegisterForm from './components/RegisterForm'\r\nimport { initialiseHotspots } from './reducers/hotspotReducer'\r\nimport { setHotspotsOnMap } from './reducers/mapReducer'\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  async componentDidMount() {\r\n    await this.props.initialiseHotspots()\r\n    if (this.props.hotspots) {\r\n      console.log(this.props.hotspots)\r\n      this.props.setHotspotsOnMap(this.props.hotspots)\r\n    }\r\n  }\r\n\r\n  render() {\r\n     return (\r\n      <div>\r\n        <div>\r\n          <MenuBar />\r\n        </div>\r\n        <div>\r\n          <Map />\r\n        </div>\r\n        <HotspotForm />\r\n        <Hotspot />\r\n        <LoginForm />\r\n        <RegisterForm />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    hotspots: state.hotspot.hotspots\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  initialiseHotspots,\r\n  setHotspotsOnMap\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport mapReducer from './reducers/mapReducer'\r\nimport viewReducer from './reducers/viewReducer'\r\nimport hotspotReducer from './reducers/hotspotReducer'\r\n//import userReducer from './reducers/userReducer'\r\n\r\nconst reducer = combineReducers({\r\n  map: mapReducer,\r\n  view: viewReducer,\r\n  hotspot: hotspotReducer\r\n})\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n  )\r\n)\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('root')\n  )\n}\n\nrender()\nstore.subscribe(render)"],"sourceRoot":""}