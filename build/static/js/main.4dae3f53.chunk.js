(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{271:function(e,t,n){e.exports=n(497)},497:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(66),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n(18),p=n(19),m=n(21),h=n(20),d=n(22),f=n(23),g=n(108),b=n.n(g),O=n(235),E=n.n(O),v=n(236),y=n.n(v),w={hotspots:[{type:"Feature",properties:{id:"5c1e0b21ee7a321eb40f3e12",icon:"star"},geometry:{type:"Point",coordinates:[24.8297076,60.3190656]}},{type:"Feature",properties:{id:"5c1e2ecbc969793cecad491a",icon:"star"},geometry:{type:"Point",coordinates:[25,60.2]}}]},j=function(e){return function(t){var n={type:"Feature",properties:{id:e.id,icon:"star"},geometry:{type:"Point",coordinates:e.location.coordinates}};console.log(n),console.log(e.location),t({type:"ADD_HOTSPOT",hotspot:n})}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HOTSPOTS":return{hotspots:t.hotspots};case"ADD_HOTSPOT":return{hotspots:e.hotspots.concat(t.hotspot)};default:return e}},C=n(39),H="MAP",k="HOTSPOTFORM",T="HOTSPOT",x="LOGINFORM",I="REGISTERFORM",_={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},L={newCoordinates:[],newLng:0,newLat:0,hotspot:null,showing:H,previousView:H,isUserLoggedIn:!1},D=function(e){return function(t){t({type:"SET_USERLOGGEDIN",loggedIn:e})}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_HOTSPOT_FORM":return Object(C.a)({},e,{newCoordinates:t.newCoordinates,showing:k});case"SHOW_MAP":return Object(C.a)({},e,{showing:H});case"SHOW_PREVIOUS":return Object(C.a)({},e,{showing:e.previousView,previousView:H});case"SHOW_HOTSPOT":return Object(C.a)({},e,{showing:T});case"HIDE_HOTSPOT":return Object(C.a)({},e,{showing:H});case"SHOW_LOGINFORM":return Object(C.a)({},e,{previousView:e.showing,showing:x});case"SHOW_REGISTERFORM":return Object(C.a)({},e,{previousView:e.showing,showing:I});case"SET_USERLOGGEDIN":return Object(C.a)({},e,{isUserLoggedIn:t.loggedIn});default:return e}},F=n(45),R=n.n(F),M="/api/hotspots",A={getAll:function(){var e=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(M);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getHotspotsByCoordinates:function(){var e=Object(u.a)(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(M,"/@").concat(t,",").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getHotspot:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(M,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post(M,t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},U={create:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("/api/comments",t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},G={hotspots:[],currentHotspot:null,newHotspot:null,error:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HOTSPOTS_SUCCESS":return{hotspots:t.hotspots,error:null};case"GET_HOTSPOTS_FAIL":return Object(C.a)({},e,{error:t.error});case"SET_CURRENT_HOTSPOT":return Object(C.a)({},e,{currentHotspot:e.hotspots.find(function(e){return e.id===t.id}),error:null});case"ADD_HOTSPOT_SUCCESS":return Object(C.a)({},e,{hotspots:e.hotspots.concat(t.hotspot),newHotspot:t.hotspot,error:null});case"ADD_HOTSPOT_FAIL":return Object(C.a)({},e,{error:t.error});case"ADD_COMMENT_SUCCESS":var n=Object(C.a)({},e.hotspots.find(function(e){return e.id===t.comment.inHotspot.id}));return n.comments=n.comments.concat(t.comment),Object(C.a)({},e,{hotspots:e.hotspots.map(function(e){return e.id===n.id?n:e}),currentHotspot:n,error:null});case"ADD_COMMENT_FAIL":return Object(C.a)({},e,{error:t.error});default:return e}},W=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.accessToken="pk.eyJ1Ijoic2tvbGFzdGlrYSIsImEiOiJjanFxZHdtOTQwYWdlNDNtZDR1eDB0ZTkwIn0.GcMqIGQE0v0ZIMPkUraBKw";this.map=new b.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[24.7385109,60.11021],zoom:8,maxBounds:[[19.274990495527675,59.64523662578557],[31.618656929369678,70.13546651354179]]}),this.map.addControl(new y.a({defaultLanguage:"mul"})),this.map.addControl(new E.a({accessToken:b.a.accessToken,language:"fi",placeholder:"Etsi..."})),this.map.on("load",function(){e.map.addSource("hotspots",{type:"geojson",data:{type:"FeatureCollection",features:e.props.hotspots}}),e.map.addLayer({id:"hotspot",source:"hotspots",type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0}})}),this.map.on("click","hotspot",function(t){t.originalEvent.cancelBubble=!0,e.props.setCurrentHotspot(t.features[0].properties.id),e.props.showHotspot()}),this.map.on("click",function(t){t.originalEvent.cancelBubble||(console.log(t.lngLat.lng+" "+t.lngLat.lat),e.props.isUserLoggedIn&&e.props.showHotspotForm([t.lngLat.lng,t.lngLat.lat]))})}},{key:"componentDidUpdate",value:function(){this.map.getSource("hotspots")&&this.map.getSource("hotspots").setData({type:"FeatureCollection",features:this.props.hotspots})}},{key:"render",value:function(){return a.a.createElement("div",{id:"map",style:{position:"absolute",top:0,bottom:0,width:"100%",height:"100%",textAlign:"left",marginTop:"43px",zIndex:10}})}}]),t}(a.a.Component),N={addHotspot:j,showHotspotForm:function(e){return function(t){t({type:"SHOW_HOTSPOT_FORM",newCoordinates:e})}},showHotspot:function(e){return function(e){e({type:"SHOW_HOTSPOT"})}},setCurrentHotspot:function(e){return function(t){t({type:"SET_CURRENT_HOTSPOT",id:e})}}},K=Object(f.b)(function(e){return{hotspots:e.map.hotspots,isUserLoggedIn:e.view.isUserLoggedIn}},N)(W),B=n(515),J=n(513),Z=n(233),z=n(516),Q=n(507),Y={login:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("/logout",{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).logout=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.logout();case 2:n.props.setUserLoggedIn(!1);case 3:case"end":return e.stop()}},e,this)})),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(z.a,{attached:"top",tabular:!0},a.a.createElement(Q.a,null,a.a.createElement(z.a.Item,null,"Luontovahdit"),a.a.createElement(z.a.Menu,{position:"right"},e.props.isUserLoggedIn?a.a.createElement(J.a,{item:!0,icon:"bars",direction:"left"},a.a.createElement(J.a.Menu,null,a.a.createElement(J.a.Item,{onClick:e.logout},"Kirjaudu ulos",a.a.createElement(Z.a,{style:{paddingLeft:"5px"},name:"log out"})))):a.a.createElement(z.a.Item,{onClick:e.props.showLoginForm},a.a.createElement(Z.a,{name:"sign in"})))))}}]),t}(a.a.Component),X={showLoginForm:function(){return function(e){e({type:"SHOW_LOGINFORM"})}},setUserLoggedIn:D},$=Object(B.a)(Object(f.b)(function(e){return{isUserLoggedIn:e.view.isUserLoggedIn}},X)(q)),ee=n(512),te=n(510),ne=n(508),re=n(514),ae=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).close=function(){return n.props.hideHotspotForm()},n.addHotspot=function(){var e=Object(u.a)(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(t.target.title.value.length>0&&t.target.description.value.length>0)){e.next=8;break}return r={title:t.target.title.value,description:t.target.description.value,location:{type:"Point",coordinates:n.props.coordinates}},t.target.title.value="",t.target.description.value="",e.next=7,n.props.addHotspot(r);case 7:n.props.error?(console.log("Error adding hotspot..."),console.log(n.props.error)):(console.log("Added hotspot!"),console.log(n.props.newHotspot),n.props.addHotspotToMap(n.props.newHotspot),n.props.hideHotspotForm());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return console.log("open "+this.props.open),a.a.createElement("div",null,a.a.createElement(ee.a,{open:this.props.open,closeOnDimmerClick:!1,onClose:this.close,closeIcon:!0},a.a.createElement(ee.a.Header,null,"Lis\xe4\xe4 kohde"),a.a.createElement(ee.a.Content,null,a.a.createElement(te.a,{onSubmit:this.addHotspot},a.a.createElement("div",null,"Kohteen nimi:",a.a.createElement(te.a.Input,{type:"text",name:"title"})),a.a.createElement("div",null,"Havainto:",a.a.createElement(ne.a,{name:"description",style:{minHeight:100}})),a.a.createElement(re.a,{type:"submit"},"Lis\xe4\xe4")))))}}]),t}(r.Component),oe={hideHotspotForm:function(){return function(e){e({type:"SHOW_MAP"})}},addHotspot:function(e){return function(){var t=Object(u.a)(c.a.mark(function t(n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.create(e);case 3:r=t.sent,n({type:"ADD_HOTSPOT_SUCCESS",hotspot:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:"ADD_HOTSPOT_FAIL",error:"Kohdetta ei voitu lis\xe4t\xe4! "+t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},addHotspotToMap:j},se=Object(f.b)(function(e){return{open:e.view.showing===k,coordinates:e.view.newCoordinates,newHotspot:e.hotspot.newHotspot,error:e.hotspot.error}},oe)(ae),ie=n(232),ce=n(509),ue=n(517),le=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return console.log(this.props),a.a.createElement("div",null,this.props.comments.map(function(e){return a.a.createElement("div",{key:e.id},a.a.createElement(ue.a,null,new Date(e.createdAt).toLocaleDateString("fi-FI",_)," lis\xe4nnyt ",e.addedBy.name,a.a.createElement(ce.a,{hidden:!0}),a.a.createElement("p",null,e.content),a.a.createElement(ce.a,{hidden:!0}),a.a.createElement(re.a,{as:"div",labelPosition:"right"},a.a.createElement(re.a,{compact:!0,basic:!0,color:"green"},a.a.createElement(Z.a,{name:"thumbs up"})),a.a.createElement(ie.a,{basic:!0,pointing:"left"},e.upVotes)),a.a.createElement(re.a,{as:"div",labelPosition:"right"},a.a.createElement(re.a,{compact:!0,basic:!0,color:"orange"},a.a.createElement(Z.a,{name:"thumbs down"})),a.a.createElement(ie.a,{as:"a",basic:!0,pointing:"left"},e.downVotes)),a.a.createElement(re.a,{compact:!0,basic:!0,color:"red"},a.a.createElement(Z.a,{name:"flag"}))),a.a.createElement(ce.a,{hidden:!0}))}))}}]),t}(a.a.Component),pe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleVisibility=function(){n.setState({visible:!n.state.visible})},n.state={visible:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e={display:this.state.visible?"none":""},t={display:this.state.visible?"":"none"};return a.a.createElement(ue.a,null,a.a.createElement("div",{style:e},a.a.createElement(re.a,{onClick:this.toggleVisibility},this.props.buttonLabel)),a.a.createElement("div",{style:t},a.a.createElement(re.a,{basic:!0,onClick:this.toggleVisibility},"Peruuta"),a.a.createElement(ce.a,{hidden:!0}),this.props.children))}}]),t}(a.a.Component),me=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).addComment=function(){var e=Object(u.a)(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(t.target.comment.value.length>0)){e.next=7;break}return r={content:t.target.comment.value,inHotspot:n.props.hotspotId},t.target.comment.value="",e.next=6,n.props.addComment(r);case 6:n.props.error?(console.log("Error adding comment..."),console.log(n.props.error)):console.log("Added hotspot!");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(te.a,{onSubmit:this.addComment},a.a.createElement("div",null,a.a.createElement(ne.a,{name:"comment",style:{minHeight:100}})),a.a.createElement(re.a,{type:"submit"},"Lis\xe4\xe4"))}}]),t}(r.Component),he={addComment:function(e){return function(){var t=Object(u.a)(c.a.mark(function t(n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.create(e);case 3:r=t.sent,n({type:"ADD_COMMENT_SUCCESS",comment:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:"ADD_COMMENT_FAIL",error:"Kommentia ei voitu lis\xe4t\xe4! "+t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}},de=Object(f.b)(function(e){return{error:e.hotspot.error}},he)(me),fe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).close=function(){return n.props.hideHotspot()},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;if(this.props.hotspot){var t=this.props.hotspot;return a.a.createElement("div",null,a.a.createElement(ee.a,{open:this.props.open,closeOnDimmerClick:!1,onClose:this.close,closeIcon:!0},a.a.createElement(ee.a.Header,null,t.title),a.a.createElement(ee.a.Content,null,a.a.createElement(re.a,{as:"div",labelPosition:"right"},a.a.createElement(re.a,{basic:!0,color:"green"},a.a.createElement(Z.a,{name:"thumbs up"})),a.a.createElement(ie.a,{as:"a",basic:!0,pointing:"left"},t.upVotes)),a.a.createElement(re.a,{as:"div",labelPosition:"right"},a.a.createElement(re.a,{basic:!0,color:"orange"},a.a.createElement(Z.a,{name:"thumbs down"})),a.a.createElement(ie.a,{as:"a",basic:!0,pointing:"left"},t.downVotes)),a.a.createElement(re.a,{basic:!0,color:"red"},a.a.createElement(Z.a,{name:"flag"})),"lis\xe4nnyt ",t.addedBy.name,a.a.createElement(ce.a,{hidden:!0}),t.description,a.a.createElement(ce.a,{hidden:!0}),e.props.isUserLoggedIn?a.a.createElement(pe,{buttonLabel:"Kommentoi"},a.a.createElement(de,{hotspotId:t.id})):null,a.a.createElement(le,{comments:t.comments}))))}return a.a.createElement("div",null,a.a.createElement(ee.a,{open:this.props.open,closeOnDimmerClick:!1,onClose:this.close,closeIcon:!0},a.a.createElement(ee.a.Header,null,"Kohdetta ei l\xf6ytynyt!"),a.a.createElement(ee.a.Content,null,a.a.createElement("p",null,"Jotain meni pieleen."))))}}]),t}(r.Component),ge={hideHotspot:function(){return function(e){e({type:"SHOW_MAP"})}}},be=Object(f.b)(function(e){return{open:e.view.showing===T,hotspot:e.hotspot.currentHotspot,isUserLoggedIn:e.view.isUserLoggedIn}},ge)(fe),Oe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).open=function(){n.props.history.push("/login")},n.close=function(){n.props.hideLoginForm(),n.props.history.push("/")},n.login=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(t.target.username.value.length>0&&t.target.password.value.length>0)){e.next=12;break}return e.prev=2,e.next=5,Y.login({username:t.target.username.value,password:t.target.password.value});case 5:n.props.setUserLoggedIn(!0),n.props.hideLoginForm(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(ee.a,{open:this.props.open,closeOnDimmerClick:!1,onOpen:this.open,onClose:this.close,closeIcon:!0},a.a.createElement(ee.a.Header,null,"Tervetuloa!"),a.a.createElement(ee.a.Content,null,a.a.createElement(te.a,{onSubmit:this.login},a.a.createElement("div",null,"K\xe4ytt\xe4j\xe4tunnus:",a.a.createElement(te.a.Input,{type:"text",name:"username"})),a.a.createElement("div",null,"Salasana:",a.a.createElement(te.a.Input,{type:"password",name:"password"})),a.a.createElement(re.a,{type:"submit",icon:!0,labelPosition:"right"},"Kirjaudu sis\xe4\xe4n",a.a.createElement(Z.a,{name:"sign in"})),a.a.createElement(re.a,{type:"button",onClick:this.props.showRegisterForm},"Rekister\xf6idy?")))))}}]),t}(r.Component),Ee={hideLoginForm:function(){return function(e){e({type:"SHOW_PREVIOUS"})}},setUserLoggedIn:D,showRegisterForm:function(){return function(e){e({type:"SHOW_REGISTERFORM"})}}},ve=Object(B.a)(Object(f.b)(function(e){return{open:e.view.showing===x}},Ee)(Oe)),ye=n(102),we=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).close=function(){return n.props.hideRegisterForm()},n.register=function(){var e=Object(u.a)(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.setState({usernameError:!1,passwordError:!1,displaynameError:!1,emailError:!1}),!(n.state.username.length<6)){e.next=5;break}return e.next=5,n.setState({usernameError:!0});case 5:if(!(n.state.password.length<8||n.state.password!==n.state.passwordConf)){e.next=8;break}return e.next=8,n.setState({passwordError:!0});case 8:if(!(n.state.displayname.length<6)){e.next=11;break}return e.next=11,n.setState({displaynameError:!0});case 11:if(!(n.state.email.length<6)){e.next=14;break}return e.next=14,n.setState({emailError:!0});case 14:if(!(n.state.usernameError||n.state.passwordError||n.state.displaynameError||n.state.emailError)){e.next=18;break}return e.abrupt("return");case 18:return r={username:n.state.username,password:n.state.password,displayname:n.state.displayname,email:n.state.email},e.prev=19,e.next=22,Y.register(r);case 22:n.props.hideRegisterForm(),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(19),console.log("Virhe rekister\xf6inniss\xe4..."),console.log(e.t0);case 29:case"end":return e.stop()}},e,this,[[19,25]])}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(ye.a)({},e.target.name,e.target.value))},n.state={username:"",password:"",passwordConf:"",displayname:"",email:"",usernameError:!1,passwordError:!1,displaynameError:!1,emailError:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return console.log("open "+this.props.open),a.a.createElement("div",null,a.a.createElement(ee.a,{open:this.props.open,closeOnDimmerClick:!1,onClose:this.close,closeIcon:!0},a.a.createElement(ee.a.Header,null,"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),a.a.createElement(ee.a.Content,null,a.a.createElement(te.a,{onSubmit:this.register},a.a.createElement("div",null,"K\xe4ytt\xe4j\xe4tunnus:",a.a.createElement(te.a.Input,{type:"text",name:"username",error:this.state.usernameError,onChange:this.handleChange})),a.a.createElement("div",null,"Salasana:",a.a.createElement(te.a.Input,{type:"password",name:"password",error:this.state.passwordError,onChange:this.handleChange})),a.a.createElement("div",null,"Salasana uudelleen:",a.a.createElement(te.a.Input,{type:"password",name:"passwordConf",error:this.state.passwordError,onChange:this.handleChange})),a.a.createElement("div",null,"Nimimerkki:",a.a.createElement(te.a.Input,{type:"text",name:"displayname",error:this.state.displaynameError,onChange:this.handleChange})),a.a.createElement("div",null,"S\xe4hk\xf6postiosoite:",a.a.createElement(te.a.Input,{type:"text",name:"email",error:this.state.emailError,onChange:this.handleChange})),a.a.createElement(re.a,{type:"submit"},"Rekister\xf6idy")))))}}]),t}(r.Component),je={hideRegisterForm:function(){return function(e){e({type:"SHOW_PREVIOUS"})}}},Se=Object(f.b)(function(e){return{open:e.view.showing===I}},je)(we),Ce=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.initialiseHotspots();case 2:this.props.hotspots&&(console.log(this.props.hotspots),this.props.setHotspotsOnMap(this.props.hotspots));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement($,null)),a.a.createElement("div",null,a.a.createElement(K,null)),a.a.createElement(se,null),a.a.createElement(be,null),a.a.createElement(ve,null),a.a.createElement(Se,null))}}]),t}(a.a.Component),He={initialiseHotspots:function(){return function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getAll();case 3:n=e.sent,console.log(n),t({type:"GET_HOTSPOTS_SUCCESS",hotspots:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"GET_HOTSPOTS_FAIL",error:"Virhe kohteiden haussa! "+e.t0});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},setHotspotsOnMap:function(e){return function(t){var n=e.map(function(e){return{type:"Feature",properties:{id:e.id,icon:"star"},geometry:{type:"Point",coordinates:e.location.coordinates}}});console.log(n),t({type:"SET_HOTSPOTS",hotspots:n})}}},ke=Object(f.b)(function(e){return{hotspots:e.hotspot.hotspots}},He)(Ce),Te=n(59),xe=n(260),Ie=n(261),_e=Object(Te.combineReducers)({map:S,view:P,hotspot:V}),Le=Object(Te.createStore)(_e,Object(Ie.composeWithDevTools)(Object(Te.applyMiddleware)(xe.a))),De=n(511),Pe=function(){s.a.render(a.a.createElement(f.a,{store:Le},a.a.createElement(De.a,null,a.a.createElement(ke,null))),document.getElementById("root"))};Pe(),Le.subscribe(Pe)}},[[271,2,1]]]);
//# sourceMappingURL=main.4dae3f53.chunk.js.map